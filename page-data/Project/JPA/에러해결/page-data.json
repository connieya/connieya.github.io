{"componentChunkName":"component---src-templates-post-template-tsx","path":"/Project/JPA/에러해결/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%83%9D-%EC%98%A4%EB%B2%84-%ED%94%8C%EB%A1%9C%EC%9A%B0\">스택 오버 플로우</a></p>\n<ul>\n<li><a href=\"#%EB%B0%9C%EC%83%9D-%EC%83%81%ED%99%A9\">발생 상황</a></li>\n<li><a href=\"#%EC%9B%90%EC%9D%B8\">원인</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0\">해결</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%88%9C%ED%99%98-%EC%B0%B8%EC%A1%B0\">순환 참조</a></p>\n<ul>\n<li><a href=\"#%EB%B0%9C%EC%83%9D-%EC%83%81%ED%99%A9-1\">발생 상황</a></li>\n<li><a href=\"#%EC%9B%90%EC%9D%B8-1\">원인</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0-1\">해결</a></li>\n</ul>\n</li>\n</ul>","html":"<p>연관 관계 매핑을 하고 서버를 실행 한 뒤, 클라이언트에서 요청을 했는 데 에러가 발생하였다.</p>\n<h3 id=\"스택-오버-플로우\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%83%9D-%EC%98%A4%EB%B2%84-%ED%94%8C%EB%A1%9C%EC%9A%B0\" aria-label=\"스택 오버 플로우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스택 오버 플로우</h3>\n<h4 id=\"발생-상황\" style=\"position:relative;\"><a href=\"#%EB%B0%9C%EC%83%9D-%EC%83%81%ED%99%A9\" aria-label=\"발생 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>발생 상황</h4>\n<p>로그인을 시도 했는데 500에러가 발생하였다.</p>\n<p>서버 콘솔을 살펴보니 다음과 같은 에러 로그를 발견하였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c8bc7f0ec61b12873e321244ed3a6582/43738/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.60416666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVR42nVUV5LrMAzLdVLc1Yvlmb3/mfgISlacfdkPjsrECACCuq3rSsuySM3z/LEfh4Fez2et14uevD7b/nq+1i3GSDnnXvu+S6WU+JwopEKLyaRsIO8dhRDIaC1/+hUwhMgApQPte6ZSdgEPwTNgpjX80OoKaW0Y1BNUDcOLHvcHPR61LoBBPgZTlLDjMxjiDFBrDRljaNsUKaXEjo1BsVe6njugdVXGWRUkkGMmMbLMuNNqM2mWHJpkpTSDbzRNk9TAXndAZ20FErDQmeIOnjm2ZLKFJvjIQI4JgBlA7ve71IdkL0xSYxhFKkpY8scoYx1pY6UR8A8dHsdRpEoaeP/RZfiWU/WtlNJ9xBrzznLZR+drk9Blc3q6dU9/NaV1uNS1tNikxNLzQbP/oYW7bNieyHeawcDqu2SWFFPqTXl39y3ZusAgNS6nZHgI0HGcJELvpgCQAeCl+AlA9tIHX+95r7QViRbFLCETZ82R0Rzyz9i0LodfXQY4PHMcm8lgWhKzrb8FCOLyVbLIbEFGYVJyO0t0kDuPLCZa1q0zguRzpq9zfUNk0NkT5DiOPnp1gpLIRF4xMZANHwEM6f9JhrTEjwAKj0FuDOOZR3TZHrTZ3JqWxb8Vj8NF6p+jd46f90FYOV43X1+caa7zi4D/9Xz9A3GdBk6GEc46AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c8bc7f0ec61b12873e321244ed3a6582/a59e9/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.webp 192w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/0ca9f/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.webp 384w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/dc9b9/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.webp 768w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/50e74/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.webp 992w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c8bc7f0ec61b12873e321244ed3a6582/3b721/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png 192w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/66595/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png 384w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/fe486/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png 768w,\n/static/c8bc7f0ec61b12873e321244ed3a6582/43738/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png 992w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c8bc7f0ec61b12873e321244ed3a6582/fe486/%EC%8A%A4%ED%83%9D%EC%98%A4%EB%B2%84%ED%94%8C%EB%A1%9C%EC%9A%B0.png\"\n            alt=\"img.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>어디서 에러가 발생했는지 확인해보니</p>\n<p>UserDetailsService 구현한 PrincipleDetailService 의 loadUserByUsername 메소드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PrincipleDetailService</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserDetailsService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">UserRepository</span> userRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserDetails</span> <span class=\"token function\">loadUserByUsername</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> username<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">UsernameNotFoundException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loadUser 아이디 => \"</span><span class=\"token operator\">+</span> username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">User</span> userEntity <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByUsername</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomApiException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"존재하지 않는 아이디 입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"로그인 요청 => \"</span> <span class=\"token operator\">+</span>userEntity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrincipalDetails</span><span class=\"token punctuation\">(</span>userEntity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>로그인 과정을 확인하기 위해\nSystem.out.println(“로그인 요청 => ” +userEntity); 작성한 코드에서 에러가 발생하였다.</p>\n<h4 id=\"원인\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EC%9D%B8\" aria-label=\"원인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원인</h4>\n<p>모든 엔티티에 있는 @Data 애노테이션이 원인이었다.</p>\n<p>영방향 관계를 가지고 있는 User 와 Image</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> nickname<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span><span class=\"token punctuation\">></span></span> images<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    \n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Image</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// N : 1</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> caption<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> postImageUrl<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 사진을 전송받아서 사진을 서버에 특정 폴더에 저장</span>\n\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userId\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">User</span> user<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"image\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 연관관계의 주인이 아니다.</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Likes</span><span class=\"token punctuation\">></span></span> likes<span class=\"token punctuation\">;</span>\n    \n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"image\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Comment</span><span class=\"token punctuation\">></span></span> comments <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Likes, Comment ,Follow 등 모든 엔티티도 위와 같이 @Data 애노테이션 사용</p>\n<blockquote>\n<p>@Data 애노테이션은 롬복 라이브러리에서 제공하는 기능으로\ngetters, setters, toString , equals, hashCode 메서드 등을 자동으로 생성해준다.</p>\n</blockquote>\n<p>여기서 toString 이 문제를 발생시켰다.</p>\n<p>User 객체에 있는 toString 메서드에서 Image 객체를 호출하고\nImage 객체는 또 toString 메서드에서 User 객체 , Likes 객체 , Comment 객체를 호출하고\n이렇게 서로가 서로를 계속 무한으로 호출하면서 스택오버 플로우가 발생하게 된 것이다.</p>\n<h4 id=\"해결\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결</h4>\n<ol>\n<li>@Data 애노테이션 제거</li>\n</ol>\n<p>@Data 애노테이션을 제거하고 @Setter , @Getter 애노테이션만 추가 하는 방법으로 스택오버 플로우를 해결 할 수 있다.</p>\n<ol start=\"2\">\n<li>@ToString 재정의 하기</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@ToString</span><span class=\"token punctuation\">(</span>exclude <span class=\"token operator\">=</span> <span class=\"token string\">\"images\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> nickname<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span><span class=\"token punctuation\">></span></span> images<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>@ToString 의 exclude 속성을 사용하여 , 특정 필드를 문자열 출력에서 제외 시킬 수 있다.\n위의 코드에서는 무한 호출을 방지하기 위해 images 필드를 제거하였다.</p>\n<p>두 가지 방법 중 1번 방법을 사용하여 스택오버 플로우를 해결 하였다.</p>\n<p>하지만 여기서, 끝나지 않았다.</p>\n<p>다시 로그인을 시도 하였는데 , 또 다른 에러가 발생하였다.</p>\n<h3 id=\"순환-참조\" style=\"position:relative;\"><a href=\"#%EC%88%9C%ED%99%98-%EC%B0%B8%EC%A1%B0\" aria-label=\"순환 참조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>순환 참조</h3>\n<p>toString 호출 하는 부분에서 무한 호출할 수 있는 코드를 제거했지만,</p>\n<p>여전히 로그인을 시도 했을 때 에러가 발생 했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8eba9ee29b51a32b12a27a6e9e85c5ef/11930/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVR42nVTWbKDIBD0PC4lLgFkiZrc/0zz6IFBK8n7mAJx7GVaGq01SRljeF2WhZRSuUZFfd9/Vdd1P6sJIVCteO2dc7RtG9e6rjSOI03TxGTzPNNwJ+gugsZ5T6gK5B3FBOzLGVZrbXWAApkPnnTagwxOKiA+yB97VohmAce5KAWorCghglpWPAzfgPEGGGMkeZfBbFXI/akXBHjGGP61jGYAhw/L+JDXVNKvCxgst237qTCHktkjK/YFUJTcreOc1c0LhyXJN7DoZIYh23DOs2WsolBUGqM5OPRvLhMgmAooKu5zi6wwsNI7oLUJAOowb1hOyUvK1XJVWEAlFBlFTjpZtobBJCCfVGKe+b9crpQ3AOK/KkDSnME3fmdLunKj0BtLynKzAAaVzXGe9NwPOl8v4v1zp33fef96v+k4Tg4HxFCoDQiTgxDTcz5bH490kxSNStEfTtCKQssk7jgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8eba9ee29b51a32b12a27a6e9e85c5ef/a59e9/img.webp 192w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/0ca9f/img.webp 384w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/dc9b9/img.webp 768w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/e2c2f/img.webp 1152w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/a742c/img.webp 1311w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8eba9ee29b51a32b12a27a6e9e85c5ef/3b721/img.png 192w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/66595/img.png 384w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/fe486/img.png 768w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/d2d74/img.png 1152w,\n/static/8eba9ee29b51a32b12a27a6e9e85c5ef/11930/img.png 1311w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8eba9ee29b51a32b12a27a6e9e85c5ef/fe486/img.png\"\n            alt=\"img.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이번에도 StackOverflow 에러가 발생 하였다.</p>\n<h4 id=\"발생-상황-1\" style=\"position:relative;\"><a href=\"#%EB%B0%9C%EC%83%9D-%EC%83%81%ED%99%A9-1\" aria-label=\"발생 상황 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>발생 상황</h4>\n<p>toString() 제거 했는데, 왜 또 발생 한 것일까?\n원인을 찾기 위해 포스트맨으로 api를 요청 해보았다.</p>\n<p>그리고 결과를 보니,</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4414163d6c22183b72f4158cea7218a/010a2/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAElEQVR42mWQ23LDIAwF8/8f2Wl9AQRYgGvHTvpwckSTTqd90MAgsVrpcu47lpDgckVMCokFIVYo7zHZW4PwdGlF4N0z52NDZF3KPMuOpBu0HbjevnC5bxsWL3BSMHnFu68YA0E+Ec4GsiCGjMC8D4qJYbXS8wVtvaI0StUN+3EjkIbZR8yEjAR+EDhIhRBiFpHAxDBrL8pmhcCK4HN/a58HKqEW5+1uhgYUzCya/gG1A+Mf4MwwoK3iBTTL43wClxDh+MHGGXzBKK2P2Q0JTZJ/gNMvQwOuLyDjG8iRkxMMjnaz4m0u3bLviAAJtsOFMFqJNVQaKoGpNzGY0k6fhg9SVcRFBZVVVgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f4414163d6c22183b72f4158cea7218a/a59e9/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 192w,\n/static/f4414163d6c22183b72f4158cea7218a/0ca9f/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 384w,\n/static/f4414163d6c22183b72f4158cea7218a/dc9b9/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 768w,\n/static/f4414163d6c22183b72f4158cea7218a/e2c2f/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 1152w,\n/static/f4414163d6c22183b72f4158cea7218a/f3efb/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 1536w,\n/static/f4414163d6c22183b72f4158cea7218a/4b981/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.webp 1716w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f4414163d6c22183b72f4158cea7218a/3b721/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 192w,\n/static/f4414163d6c22183b72f4158cea7218a/66595/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 384w,\n/static/f4414163d6c22183b72f4158cea7218a/fe486/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 768w,\n/static/f4414163d6c22183b72f4158cea7218a/d2d74/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 1152w,\n/static/f4414163d6c22183b72f4158cea7218a/e8464/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 1536w,\n/static/f4414163d6c22183b72f4158cea7218a/010a2/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png 1716w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f4414163d6c22183b72f4158cea7218a/fe486/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B01.png\"\n            alt=\"img_2.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>(몇 초후에 포스트맨이 친절하게 보기 좋게 변환해주었다. )</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/edd7cd899548c0db71240b90289a0df0/0b8c0/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.70833333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVR42pVTi27DIBDr/3/lpL3ybguE5xHvDpJs06SOIlkQEozv7FyCc/DGIDkLigEhxQJg21HHtm1NuFBMWKcJylgYl+AjwXrec/GEcXIJoWVcKCWYvsNbf8fHZAqBEGa+rSDv2LY2wsyEehgxjTd0y4rxZnE3Hi6kU52sG/mYkAhhXRkGkctKtIEYiTI/VxCvW8cl5wwh1f0AdTeshuBD7aUoc/v6KYXyrVcKeppLuauPv0wppds6/9fLkzBohaUb8dJrXLWHZWXSgp+RoFznRkIm6kcMsz7N0Taw49UYzQpjQ3RqD+X2GEvZMYRiyBEZ4veijPa9NkLGUbbiCEm/DkMEkktBJHqCUBTxATvPUDcNxeV+k8Vq1G6WRKmJkJhwHQa8d1e8jpoPh2JOacFRPj3O5V+FyxXTsOCTzZFfcVG2RoeV6j06j5z+AlO8TkwTI1AAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/edd7cd899548c0db71240b90289a0df0/a59e9/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.webp 192w,\n/static/edd7cd899548c0db71240b90289a0df0/0ca9f/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.webp 384w,\n/static/edd7cd899548c0db71240b90289a0df0/dc9b9/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.webp 768w,\n/static/edd7cd899548c0db71240b90289a0df0/39914/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.webp 1043w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/edd7cd899548c0db71240b90289a0df0/3b721/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png 192w,\n/static/edd7cd899548c0db71240b90289a0df0/66595/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png 384w,\n/static/edd7cd899548c0db71240b90289a0df0/fe486/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png 768w,\n/static/edd7cd899548c0db71240b90289a0df0/0b8c0/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png 1043w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/edd7cd899548c0db71240b90289a0df0/fe486/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B02.png\"\n            alt=\"img_1.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>사진에 다 담을수 없지만 데이터 엄청나게 많은 값이 계층적으로 나타났다.</p>\n<p>포스트맨의 스크롤을 내려도 끝이 없었다..</p>\n<p>로그인 요청은 성공했는데, 값을 응답 해줄 때 에러가 발생 한 것이다.</p>\n<h4 id=\"원인-1\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EC%9D%B8-1\" aria-label=\"원인 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원인</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@Transactional</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">signin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SignInRequest</span> signInRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> authenticationToken <span class=\"token operator\">=</span> signInRequest<span class=\"token punctuation\">.</span><span class=\"token function\">toAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Authentication</span> authenticate<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            authenticate <span class=\"token operator\">=</span> authenticationManager<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>authenticationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BadCredentialsException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RespDto</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"비밀번호가 일치 하지 않습니다.\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">TokenDto</span> tokenDto <span class=\"token operator\">=</span> tokenHelper<span class=\"token punctuation\">.</span><span class=\"token function\">generateTokenDto</span><span class=\"token punctuation\">(</span>authenticate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrincipalDetails</span> principal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">PrincipalDetails</span><span class=\"token punctuation\">)</span> authenticate<span class=\"token punctuation\">.</span><span class=\"token function\">getPrincipal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RespDto</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"로그인 성공\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SignInResponse</span><span class=\"token punctuation\">(</span>tokenDto<span class=\"token punctuation\">,</span>principal<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>클라이언트에 토큰 값과 스프링 시큐리티의 사용자 세부 정보를 응답 하는데,</p>\n<p>principal.getUser() 는 User 엔티티다.</p>\n<p>User 엔티티를 다시 살펴보자</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Getter</span> <span class=\"token annotation punctuation\">@Setter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> nickname<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span><span class=\"token punctuation\">></span></span> images<span class=\"token punctuation\">;</span>\n    \n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>응답 할 값에 images 객체도 포함되어 있다.</p>\n<p>여기서 스프링의 JSON 응답 개념을 알고 있어야 위의 에러 상황을 이해할 수 있다.</p>\n<ul>\n<li>JSON 은 키-값 쌍으로 이루어진 데이터 표준 포맷으로 , 서버와 클라이언트 간의 데이터를 교환 할 때 주로 사용한다.</li>\n<li>클라이언트에 응답 하기 위해 java 객체를 json 형식으로 변환 해주어야 하는데 보통 Jackson 라이브러리를 사용한다.</li>\n<li>스프링 부트에는 Jackson 라이브러리가 기본으로 내장되어 있다.</li>\n<li>@RestController 애노테이션이 붙은 경우 , 클래스 패스에 Jackson이 존재하면 JSON 형식으로 변환해서 응답한다.</li>\n</ul>\n<p>위의 과정 속에서 클라이언트로 응답 하는 User 객체가 JSON 으로 변환 되는데, 이때  user 와 images 가 서로의 정보를\n계속 순환하여 참조하게 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 739px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c985dac8f03e29d7c13748e1e998d952/8dd81/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.70833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACHElEQVR42q1UW5LbIBD0/e+RI+Qg+Um8+dhK7JUfsoQECBAI1BkeXsvP/Ymqphgh0dUz3cxKVxWmEPC/ntXIOsjTCVIqMGEwWg8zTjA2x+h8yctK3yztzfMTQCM4xHaDhklsawmpLNTooI2DKnHOhxjaJuD5CeLKcAF+bPFxGvC+67FrJPphTGwjk+XzjNV1yfyAvvoJVrfouELVKtS9QidHcAIWxJgPNr0zmd9DeI68mvRvmNN3uNHAz+GORSwtR2YYYo4XgIEUDj5gaBoIxsC4ST2K5S4jCUTC2Mkn0BeA9IOjUtbrBDr5fFgvlI4xaJf2NOVfABJDCidI4bqGkrl/Y2F2Xt0UUu4mf2Wp236ugs8lOGMgNn/Rsx5/jgK9NJ+2UQvb6GKdlBPjcHMpLoDaQB4a7BtF9uHJkx2BMjGmg1dCvbJNBgScIoNXP8D2G3Sdwp4pHFm+PUJlu/TUimQfslH06uTDc0BvjzD1Nzj5C/G/s1WWps6R92Pv5lei5JihOwHRtmC9Tn2yLtzbp+T+gcFvAKnhb2sSZ4tpigcv9tFF2SRQsc/jkpeAVIsfBshjDS1E6teSkS22sSWi0XX57v38CDDAEzPxUdFIa5N9Wq7T9MnMysT5tM/FQr6wvWdoLeRuh7oVeN9zbI6cQE1SWNDhr6ZPAkzKlTXEm0B3uqOR1rU9Dp2mkTagFTpZhas8eWI0Ik+g5Zj7B/4wz1OG51XhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c985dac8f03e29d7c13748e1e998d952/a59e9/img_1.webp 192w,\n/static/c985dac8f03e29d7c13748e1e998d952/0ca9f/img_1.webp 384w,\n/static/c985dac8f03e29d7c13748e1e998d952/55dcb/img_1.webp 739w\"\n              sizes=\"(max-width: 739px) 100vw, 739px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c985dac8f03e29d7c13748e1e998d952/3b721/img_1.png 192w,\n/static/c985dac8f03e29d7c13748e1e998d952/66595/img_1.png 384w,\n/static/c985dac8f03e29d7c13748e1e998d952/8dd81/img_1.png 739w\"\n            sizes=\"(max-width: 739px) 100vw, 739px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c985dac8f03e29d7c13748e1e998d952/8dd81/img_1.png\"\n            alt=\"img_1.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"해결-1\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-1\" aria-label=\"해결 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결</h4>\n<ol>\n<li>@JsonIgnore 사용하기</li>\n</ol>\n<p>@JsonIgnore 애노테이션을 사용하여 응답 결과에서 제외 시키자</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Image</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> caption<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> postImageUrl<span class=\"token punctuation\">;</span> <span class=\"token comment\">//저장</span>\n\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"userId\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JsonIgnore</span> <span class=\"token comment\">//  응답 결과에서 제외</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">User</span> user<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"image\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Likes</span><span class=\"token punctuation\">></span></span> likes<span class=\"token punctuation\">;</span>\n    \n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"image\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Comment</span><span class=\"token punctuation\">></span></span> comments <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span> <span class=\"token annotation punctuation\">@Setter</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> nickname<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@JsonIgnore</span> <span class=\"token comment\">// 응답 결과에서 제외</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span><span class=\"token punctuation\">></span></span> images<span class=\"token punctuation\">;</span>\n\n    \n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>Entity 대신 DTO 반환</li>\n</ol>\n<p>entity 대신 사용할 DTO 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Builder</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserInfo</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> profileImageUrl<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>엔티티 대신 DTO 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SignInResponse</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">TokenDto</span> tokenDto<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//    private User user;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserInfo</span> userInfo<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>엔티티 대신 DTO 응답</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">signin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SignInRequest</span> signInRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> authenticationToken <span class=\"token operator\">=</span> signInRequest<span class=\"token punctuation\">.</span><span class=\"token function\">toAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Authentication</span> authenticate<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        authenticate <span class=\"token operator\">=</span> authenticationManager<span class=\"token punctuation\">.</span><span class=\"token function\">getObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>authenticationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BadCredentialsException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RespDto</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"비밀번호가 일치 하지 않습니다.\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">TokenDto</span> tokenDto <span class=\"token operator\">=</span> tokenHelper<span class=\"token punctuation\">.</span><span class=\"token function\">generateTokenDto</span><span class=\"token punctuation\">(</span>authenticate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">PrincipalDetails</span> principal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">PrincipalDetails</span><span class=\"token punctuation\">)</span> authenticate<span class=\"token punctuation\">.</span><span class=\"token function\">getPrincipal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> principal<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">UserInfo</span> userInfo <span class=\"token operator\">=</span> <span class=\"token class-name\">UserInfo</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">username</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">id</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">profileImageUrl</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">getProfileImageUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">OK</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RespDto</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"로그인 성공\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SignInResponse</span><span class=\"token punctuation\">(</span>tokenDto<span class=\"token punctuation\">,</span>userInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>위의 2가지 방법 모두 에러가 나지 않고 로그인을 진행 할 수 있었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb8ac8ead622757618ce9221e1de8ce2/0d97d/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.39583333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVR42p2TTU7DMBCFe2iWbMtpOAdIUaUusiRFFd0gsUCQ1B57fh6eiFIIDSSx9DSTyPNl7DdZ5ZxxSSklcInMjEvrdhOx3RNgvvdct/oLmPmcD3X/0GH3HGAyETgGOsmMIQPYv8AxuD8T/YZNAvodnnIz6/X93WygL++qqirUdY2maXqoqi4DerGU4kiEtu0QYoSVjywC+tGkOC2ZBkOjBSjzgKnIYW1S7F4Z+zfB07vgscRDq2CZ2SEVB6EZ2xfF1V3GdcVYb7jkjJsSj1n7wU9LTKFgSJEgFKGff85iU7wwREEXMgJ559wfd2x0Jrls5ndmOCb7GhkRWQb84fqEPR9ax0WbxzDFogAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/eb8ac8ead622757618ce9221e1de8ce2/a59e9/img_2.webp 192w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/0ca9f/img_2.webp 384w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/dc9b9/img_2.webp 768w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/372ad/img_2.webp 1011w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/eb8ac8ead622757618ce9221e1de8ce2/3b721/img_2.png 192w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/66595/img_2.png 384w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/fe486/img_2.png 768w,\n/static/eb8ac8ead622757618ce9221e1de8ce2/0d97d/img_2.png 1011w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/eb8ac8ead622757618ce9221e1de8ce2/fe486/img_2.png\"\n            alt=\"img_2.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/10f64d74dfb959a888c88b72feb18651/8746f/img_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADfElEQVR42qWUW0xURxjHZ2/apLUPJalvrTwRaNLYNkXEpGmIjbUogpeyy3Jrq4kPkipVE1sTWmub3lINJkVFRGqpoFwWQYRFTE2JVhYWSArlUmMqa1hRy8LCLpc9++t3uATsq5P8M2fOfPOb/zdnzqc0LYzegsFJ+gfuMOR9wExIY3pGIxCcYnRsnPGJIJNT009oajo0Gzc65mfEN4p/PEAoFEIx38LhME/bdIbS5kED9/5l/4kbfHGujc91nXfzWWkXn/7SJc+d5JW45X373FxxG3nFet86q7yz0os8D/2oUGgO6Lz1Dyr6R0xxBRjWnkLFnyEq5yrxh5tRb5VgWHcWtfYMak0hKvY06s2TqDcKMMadwBR/HPV6Pq5urwDnz7Cp/T7q7WKWJ5VjSa5AbXMQdfA3Yo/eRFnrsGyrwZJSjXlLFeakSsybL2FMvMiK5FJWbj+HccPPtPU9XAQ624dQCaWYUqpQWx0YUutQaVfnZBO9fwW1vVbmRCmXUck1qC3VLJP4Z7dWYtx0gda+R0uAbrG7oRxTqgTPw4wZjSInKt2J0e7EYGsQtwJP1TeoR+2o5YVMBxEZNRhTKnH1P14C7BRgogDTxIFdgBmyKKsRQ7bAspvmoJlOTJn6Bo0S04AhrR6zxJutktGOKlx/LwV2ScpJv2LKcAhM0smqw/iBuMiuF5d1xOxvwJwtDm1XMGTqknk9zi4SqMFWgevOEw4HxWGBODwvwDIMWfJh7Jd4fpeDD3+opau9g9yimyR8eY3ndsqx2Ksl/QqWpV/AsvlbWXsMV9+Qfm20WeC1lnbUywk8E5OE5dVUVqzfx+qPvudd+8eUf/cJ7ssnaSr6mqLj32DbfZB3NiXxntVK9Lr1vLjqJSJWReLucC8Cnb93o1ZmY4nORb1yiLgDZXR0d1NWfIqj+/ZwMf8whV/t5cihPeTstJG7dxfWnDxe25hOTFwCkVGx/NXTswhsvn0XY+wxIjaWyFUox3r6Nr2DQ/zpecQtVw+e3l6Ky/7gSOENYnZXE5nTTNSBFlbntZCYfx1Lwk90DgyjFv7hMc8Dulr76b8/KvLh9QUIShEITE7hG5tgwj/O8GM/d4d89HlG6Pf4GPDKeHicwZEAvfdGJH5GikN4odoEGfZ60aRiPFVxWBhomjZbwvQj0L+8XjTC/5Ne6pYqtETBaW0W+B+6x60cGtVRZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/10f64d74dfb959a888c88b72feb18651/a59e9/img_3.webp 192w,\n/static/10f64d74dfb959a888c88b72feb18651/0ca9f/img_3.webp 384w,\n/static/10f64d74dfb959a888c88b72feb18651/dc9b9/img_3.webp 768w,\n/static/10f64d74dfb959a888c88b72feb18651/e2c2f/img_3.webp 1152w,\n/static/10f64d74dfb959a888c88b72feb18651/007e4/img_3.webp 1159w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/10f64d74dfb959a888c88b72feb18651/3b721/img_3.png 192w,\n/static/10f64d74dfb959a888c88b72feb18651/66595/img_3.png 384w,\n/static/10f64d74dfb959a888c88b72feb18651/fe486/img_3.png 768w,\n/static/10f64d74dfb959a888c88b72feb18651/d2d74/img_3.png 1152w,\n/static/10f64d74dfb959a888c88b72feb18651/8746f/img_3.png 1159w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/10f64d74dfb959a888c88b72feb18651/fe486/img_3.png\"\n            alt=\"img_3.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>프로젝트에서는 DTO를 사용하여 응답하는 방법을 적용하였다.</p>","frontmatter":{"title":"연관 관계 매핑 후 발생한 에러 : 스택오버플로우, 순환참조","summary":"연관 관계 매핑 후 발생 한 에러의 원인을 파악하고 해결 한 과정을 정리했습니다.","date":"2023.03.12.","categories":["Project","JPA","에러 해결"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVR42q1UW5LbIBDc+98jR8hB8pPs5mMrsVe2JUtIgACBQJ3hYa8cy85PVDViEKKrmW7mZeYcuqowh4D/8bws3mNiPeT5DCkVmDCYrIeZZhibY3K+5GWkNUvflmUDML6M4BD7HVomsW8kpLJQk4M2DqrEJR9jaJuAlw3EDMgFeN3h4zzi/TDg0EoM45TYRibrZ4vVHeDETxiq72BNh54rVJ1CMyj0cgInYEGM+WjTnMk8D2F5UEN6zfonzPkr3GTgl3DHIh4tR2YYYo5HgLQYSOHgA8a2hWAMjJtUo3jcdSSBSBg7+wT6BJB+cHSU19cEOvu8Wa+UjjFql75pyv8BGFI4QQo3DZTM9ZsKs8vo5pByN/sbS63rmQF9PoIzBmL3GwMb8KsWGKS52katbKOLdVJOjMPqUtwCagN5anFsFdmHJ0/2BMrElDbeCPXwplwBAafI4NU3sOMOfa9wZAo1y7dHqGyXgUqR7EM2il6dfXgM6G0N03yBkz8Q/7tYZW3qHPl7rN3yTJQcC3QvILoObNCpTtaFe/uU3P9l8A1AKvjbK4mzxzzHjZ/20UXZJFCxz/aR14A09+MIWTfQQqR6rRnZYhtbIhpdl3Xvly3AAE/MxEdFLa1L9um4Tt0nMysd52qfTwt5YrvN0FrIwwFNJ/B+5NjVnEBNUljQ5mfd5wqYlCtjiDeB7nRPLa3vBpx6TS1tRCd0sgpXufPEaEXuQJc29wcn8M8EcChPSQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/c985dac8f03e29d7c13748e1e998d952/fe58c/img_1.png","srcSet":"/static/c985dac8f03e29d7c13748e1e998d952/6b737/img_1.png 185w,\n/static/c985dac8f03e29d7c13748e1e998d952/704f2/img_1.png 370w,\n/static/c985dac8f03e29d7c13748e1e998d952/fe58c/img_1.png 739w","sizes":"(min-width: 739px) 739px, 100vw"},"sources":[{"srcSet":"/static/c985dac8f03e29d7c13748e1e998d952/ec434/img_1.webp 185w,\n/static/c985dac8f03e29d7c13748e1e998d952/42c9f/img_1.webp 370w,\n/static/c985dac8f03e29d7c13748e1e998d952/95558/img_1.webp 739w","type":"image/webp","sizes":"(min-width: 739px) 739px, 100vw"}]},"width":739,"height":684}},"publicURL":"/static/c985dac8f03e29d7c13748e1e998d952/img_1.png"}}}}]}},"pageContext":{"slug":"/Project/JPA/에러해결/"}},"staticQueryHashes":[],"slicesMap":{}}