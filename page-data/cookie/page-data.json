{"componentChunkName":"component---src-templates-post-template-tsx","path":"/cookie/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%83%81%ED%83%9C%EB%A5%BC-%EC%A0%80%EC%9E%A5%ED%95%A0%EA%B2%8C-%EA%B7%BC%EB%8D%B0-%EC%96%B4%EB%94%94%EC%97%90---%EC%BF%A0%ED%82%A4%EC%99%80-%EC%84%B8%EC%85%98\">상태를 저장할게, 근데 어디에? - 쿠키와 세션</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%BF%A0%ED%82%A4%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%83%9D%EA%B2%BC%EC%9D%84%EA%B9%8C\">쿠키는 어떻게 생겼을까?</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%96%B8%EC%A0%9C%EA%B9%8C%EC%A7%80-%EA%B8%B0%EC%96%B5%ED%95%A0%EA%B9%8C%EC%9A%94---%EC%BF%A0%ED%82%A4%EC%9D%98-%EC%9C%A0%ED%9A%A8%EA%B8%B0%EA%B0%84\">언제까지 기억할까요? - 쿠키의 유효기간</a></p>\n<ul>\n<li><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EB%A5%BC-%EB%81%84%EB%A9%B4-%EC%82%AC%EB%9D%BC%EC%A7%80%EB%8A%94-%EA%B8%B0%EC%96%B5-%EC%84%B8%EC%85%98-%EC%BF%A0%ED%82%A4\">브라우저를 끄면 사라지는 기억, 세션 쿠키</a></li>\n<li><a href=\"#%EB%82%A0%EC%A7%9C%EB%A5%BC-%EC%95%BD%EC%86%8D%ED%95%9C-%EA%B8%B0%EC%96%B5-%EC%98%81%EA%B5%AC-%EC%BF%A0%ED%82%A4\">날짜를 약속한 기억, 영구 쿠키</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4-%EC%9D%B4%EB%A6%84%ED%91%9C%EB%8A%94-%EB%88%84%EA%B0%80-%EB%A7%8C%EB%93%A4%EC%97%88%EB%82%98%EC%9A%94---%EC%BF%A0%ED%82%A4%EC%9D%98-%EB%B0%9C%ED%96%89-%EC%A3%BC%EC%B2%B4\">이 이름표는 누가 만들었나요? - 쿠키의 발행 주체</a></p>\n<ul>\n<li><a href=\"#%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B8%B0%EB%8A%A5%EA%B3%BC-%ED%8D%BC%EC%8A%A4%ED%8A%B8%ED%8C%8C%ED%8B%B0-%EC%BF%A0%ED%82%A4\">웹사이트의 기본 기능과 퍼스트파티 쿠키</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EC%A0%81%EA%B3%BC-%EC%84%9C%EB%93%9C%ED%8C%8C%ED%8B%B0-%EC%BF%A0%ED%82%A4\">사용자 추적과 서드파티 쿠키</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4-%EA%B8%B8%EC%9D%80-%EC%95%88%EC%A0%84%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EC%9A%94---secure-%EC%BF%A0%ED%82%A4\">\"이 길은 안전하지 않아요!\" - Secure 쿠키</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%82%B4-%EC%A0%95%EB%B3%B4%EC%97%90-%EC%86%90%EB%8C%80%EC%A7%80-%EB%A7%88---httponly-%EC%BF%A0%ED%82%A4\">\"스크립트, 내 정보에 손대지 마!\" - HttpOnly 쿠키</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%BA%EC%9C%BC%EB%A9%B0\">맺으며</a></p>\n</li>\n</ul>","html":"<p>\"손님, 처음 뵙겠습니다. 무엇을 도와드릴까요?\"\n방금 물건을 사고 계산을 마친 가게에 다시 들어섰는데, 점원이 나를 전혀 기억하지 못하고 처음 보는 사람처럼 응대한다면 어떨까요? 매번 나 자신을 다시 소개해야 하는 이 가게, 조금 불편하지 않을까요?</p>\n<p>놀랍게도 우리가 매일같이 항해하는 웹(Web)의 기본 규칙, <code class=\"language-text\">HTTP 프로토콜</code>은 바로 이 '친절하지만 기억력이 없는 점원'과 같습니다. HTTP는 <code class=\"language-text\">'Stateless(무상태)'</code> 프로토콜입니다. 즉, 방금 전에 했던 요청과 지금 하는 요청이 같은 사용자에게서 온 것인지 전혀 기억하지 못합니다. 모든 요청을 완전히 독립적인 것으로 취급하죠. 이는 수많은 요청을 효율적으로 처리하여 서버의 부담을 줄이는 아주 중요한 특징이지만, 로그인처럼 '상태 유지'가 필수적인 오늘날의 서비스에서는 치명적인 불편함으로 다가옵니다.</p>\n<p>그렇다면 이 기억력 없는 점원에게 매번 내 신분증을 보여주며 \"나 아까 왔던 사람이에요!\"라고 알려주면 어떨까요? 바로 이 '신분증' 역할을 하기 위해 등장한 기술이 바로 <strong>쿠키(Cookie)</strong> 와 <strong>세션(Session)</strong> 입니다</p>\n<p>오늘은 그 첫 번째 해결책으로, 사용자의 브라우저에 직접 상태를 저장하는 '쿠키'에 대해 자세히 알아보겠습니다.</p>\n<h2 id=\"상태를-저장할게-근데-어디에---쿠키와-세션\" style=\"position:relative;\"><a href=\"#%EC%83%81%ED%83%9C%EB%A5%BC-%EC%A0%80%EC%9E%A5%ED%95%A0%EA%B2%8C-%EA%B7%BC%EB%8D%B0-%EC%96%B4%EB%94%94%EC%97%90---%EC%BF%A0%ED%82%A4%EC%99%80-%EC%84%B8%EC%85%98\" aria-label=\"상태를 저장할게 근데 어디에   쿠키와 세션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상태를 저장할게, 근데 어디에? - 쿠키와 세션</h2>\n<p>'사용자의 상태'라는 신분증을 어디에 보관할지를 두고 두 가지 방식이 생겼습니다.</p>\n<ul>\n<li>쿠키 (Cookie): 신분증을 <strong>사용자의 지갑(클라이언트 브라우저)</strong> 에 직접 넣어주는 방식입니다.</li>\n<li>세션 (Session): 가게의 <strong>개인 사물함(서버)</strong> 에 신분증을 보관하고, 사용자에게는 그 사물함을 열 수 있는 <strong>열쇠 <br/>(세션ID)</strong> 만 주는 방식입니다.</li>\n</ul>\n<p>오늘은 이 중 사용자의 브라우저에 저장되는 쿠키에 대해 먼저 자세히 알아보겠습니다</p>\n<h2 id=\"쿠키는-어떻게-생겼을까\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%83%9D%EA%B2%BC%EC%9D%84%EA%B9%8C\" aria-label=\"쿠키는 어떻게 생겼을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠키는 어떻게 생겼을까?</h2>\n<p>쿠키는 실제로 어떻게 생겼을까요? 개발자 도구를 열어보면 쿠키의 진짜 모습을 마주할 수 있습니다.</p>\n<p><img src=\"/images/cookie.png\" alt=\"alt text\"></p>\n<p>쿠키는 기본적으로 이름(Name)과 값(Value)이 한 쌍으로 이루어진 단순한 텍스트 데이터입니다. key=value 형태로 되어있죠. 예를 들면 language=ko 나 theme=dark 와 같은 식입니다.\n하지만 쿠키가 강력한 이유는 이 이름-값 쌍에 여러 가지 <strong>규칙(속성, Attributes)</strong> 을 부여할 수 있기 때문입니다. 서버는 브라우저에게 쿠키를 전달할 때(Set-Cookie 헤더 사용), 다음과 같은 규칙들을 함께 알려줍니다.</p>\n<ul>\n<li>Expires / Max-Age: 이 쿠키가 언제 만료될지 (쿠키의 수명)</li>\n<li>Domain / Path: 이 쿠키가 어떤 주소(도메인, 경로)에서만 유효할지 (쿠키의 활동 범위)</li>\n<li>Secure: HTTPS 연결에서만 이 쿠키를 전송할지 (쿠키의 보안 채널)</li>\n<li>HttpOnly: 스크립트가 이 쿠키에 접근하는 것을 막을지 (쿠키의 접근 제어)</li>\n</ul>\n<p>브라우저는 이 규칙들을 이름-값 데이터와 함께 고스란히 저장해두었다가, 다음 요청 때 규칙에 맞춰 서버로 쿠키를 다시 전송(Cookie 헤더 사용)합니다. 이제부터 우리는 이 규칙들을 하나씩 자세히 살펴볼 것입니다.</p>\n<h2 id=\"언제까지-기억할까요---쿠키의-유효기간\" style=\"position:relative;\"><a href=\"#%EC%96%B8%EC%A0%9C%EA%B9%8C%EC%A7%80-%EA%B8%B0%EC%96%B5%ED%95%A0%EA%B9%8C%EC%9A%94---%EC%BF%A0%ED%82%A4%EC%9D%98-%EC%9C%A0%ED%9A%A8%EA%B8%B0%EA%B0%84\" aria-label=\"언제까지 기억할까요   쿠키의 유효기간 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>언제까지 기억할까요? - 쿠키의 유효기간</h2>\n<p>모든 기억이 영원하지 않듯, 쿠키에도 유효기간이 있습니다. 언제까지 기억될 것인가에 따라 쿠키는 두 종류로 나뉩니다.</p>\n<h3 id=\"브라우저를-끄면-사라지는-기억-세션-쿠키\" style=\"position:relative;\"><a href=\"#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EB%A5%BC-%EB%81%84%EB%A9%B4-%EC%82%AC%EB%9D%BC%EC%A7%80%EB%8A%94-%EA%B8%B0%EC%96%B5-%EC%84%B8%EC%85%98-%EC%BF%A0%ED%82%A4\" aria-label=\"브라우저를 끄면 사라지는 기억 세션 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>브라우저를 끄면 사라지는 기억, 세션 쿠키</h3>\n<p>세션 쿠키(Session Cookie)는 사용자가 웹사이트를 이용하는 동안, 즉 '브라우저 세션'이 살아있는 동안에만 유지되는 임시 기억입니다. 브라우저를 완전히 종료하면 이 기억은 깔끔하게 사라집니다.</p>\n<p>여기서 많은 분들이 오해하는 지점이 있습니다. '탭 하나를 닫는 것'과 '브라우저를 종료하는 것'은 다릅니다. 대부분의 최신 브라우저는 탭 하나를 닫아도 다른 탭이 열려있다면 브라우저 프로세스는 살아있습니다. 따라서 탭을 닫고 다시 열어도 로그인이 유지되는 경험, 해보셨을 겁니다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">행동</th>\n<th align=\"left\">브라우저 세션</th>\n<th align=\"left\">세션 쿠키 상태</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">새로고침</td>\n<td align=\"left\">유지</td>\n<td align=\"left\">살아 있음</td>\n</tr>\n<tr>\n<td align=\"left\">탭 닫기 후 새 탭 열기</td>\n<td align=\"left\">유지 (대부분)</td>\n<td align=\"left\">살아있음 (대부분)</td>\n</tr>\n<tr>\n<td align=\"left\">브라우저 완전 종료</td>\n<td align=\"left\">종료</td>\n<td align=\"left\">삭제됨</td>\n</tr>\n</tbody>\n</table>\n<p>주로 사용자의 현대 로그인 상태나, 비로그인 장바구니처럼 일시적인 정보를 담는 데 사용됩니다.</p>\n<h3 id=\"날짜를-약속한-기억-영구-쿠키\" style=\"position:relative;\"><a href=\"#%EB%82%A0%EC%A7%9C%EB%A5%BC-%EC%95%BD%EC%86%8D%ED%95%9C-%EA%B8%B0%EC%96%B5-%EC%98%81%EA%B5%AC-%EC%BF%A0%ED%82%A4\" aria-label=\"날짜를 약속한 기억 영구 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>날짜를 약속한 기억, 영구 쿠키</h3>\n<p>영구 쿠키(Persistent Cookie)는 이름처럼 정해진 유효기간까지 사용자의 컴퓨터에 파일 형태로 저장되는 긴 기억입니다. '자동 로그인'이나 '일주일간 이 팝업 보지 않기' 같은 기능이 바로 이 영구 쿠키 덕분입니다. 브라우저를 껐다 켜도, 심지어 컴퓨터를 재부팅해도 약속된 날짜가 되기 전까지는 이 기억이 사라지지 않죠. (물론 사용자가 직접 '쿠키 삭제'를 하면 언제든 지울 수 있습니다!)</p>\n<h2 id=\"이-이름표는-누가-만들었나요---쿠키의-발행-주체\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EC%9D%B4%EB%A6%84%ED%91%9C%EB%8A%94-%EB%88%84%EA%B0%80-%EB%A7%8C%EB%93%A4%EC%97%88%EB%82%98%EC%9A%94---%EC%BF%A0%ED%82%A4%EC%9D%98-%EB%B0%9C%ED%96%89-%EC%A3%BC%EC%B2%B4\" aria-label=\"이 이름표는 누가 만들었나요   쿠키의 발행 주체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이 이름표는 누가 만들었나요? - 쿠키의 발행 주체</h2>\n<p>쿠키는 브라우저에 저장되니 당연히 브라우저가 만드는 것 아니냐고요? 사실 쿠키를 만들고 발행하는 주체는 바로 웹 서버입니다.</p>\n<p>마치 주차 관리소(서버)가 방문한 차량(브라우저)에 주차증(쿠키)을 발급해 앞유리에 붙여두라고 지시하는 것과 같습니다. 브라우저는 서버의 지시에 따라 쿠키를 저장하고, 다음 요청 때마다 이 주차증을 관리소에 다시 보여주는 역할을 할 뿐입니다.</p>\n<p>이때, 이 주차증을 누가 발행했느냐에 따라 쿠키는 두 종류로 또 나뉩니다.</p>\n<h3 id=\"웹사이트의-기본-기능과-퍼스트파티-쿠키\" style=\"position:relative;\"><a href=\"#%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EA%B8%B0%EB%8A%A5%EA%B3%BC-%ED%8D%BC%EC%8A%A4%ED%8A%B8%ED%8C%8C%ED%8B%B0-%EC%BF%A0%ED%82%A4\" aria-label=\"웹사이트의 기본 기능과 퍼스트파티 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹사이트의 기본 기능과 퍼스트파티 쿠키</h3>\n<p>사용자가 my-shop.com 이라는 쇼핑몰에 방문했을 때, my-shop.com 서버가 직접 발행한 쿠키를 <strong><code class=\"language-text\">퍼스트파티(First-Party) 쿠키</code></strong> 라고 합니다. 로그인 정보, 장바구니, 언어 설정 등 해당 사이트의 핵심 기능을 위해 사용되는, 가장 기본적이고 필수적인 쿠키입니다.</p>\n<h3 id=\"사용자-추적과-서드파티-쿠키\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EC%A0%81%EA%B3%BC-%EC%84%9C%EB%93%9C%ED%8C%8C%ED%8B%B0-%EC%BF%A0%ED%82%A4\" aria-label=\"사용자 추적과 서드파티 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자 추적과 서드파티 쿠키</h3>\n<p>그런데 쿠키는 항상 내가 방문한 사이트에서만 발행하는 걸까요? 만약 my-shop.com 페이지 한편에 ad-company.com에서 제공하는 광고 배너가 걸려있다면 어떨까요?</p>\n<p>웹 브라우저는 my-shop.com의 웹페이지를 화면에 그리기 위해, 페이지에 포함된 광고 배너 이미지를 ad-company.com 서버에 요청해야 합니다. 바로 이 지점에서 서드파티(Third-Party) 쿠키가 등장합니다. 광고를 요청받은 ad-company.com 서버가 응답하면서 자신의 쿠키를 브라우저에 발행하는 것이죠.</p>\n<p>이 쿠키의 주인은 my-shop.com이 아닌 ad-company.com입니다.</p>\n<p>별일 아닌 것 같지만, 이 작은 차이가 심각한 프라이버시 문제를 낳습니다. 이 쿠키를 이용하면 광고 회사가 여러 사이트에 걸쳐 사용자의 온라인 활동을 <strong>추적(Cross-Site Tracking)</strong> 할 수 있게 되기 때문입니다.</p>\n<p>어떻게 그게 가능할까요? 비밀은 쿠키의 고유 ID와, 요청 정보에 담긴 리퍼러(Referer) 헤더의 조합에 있습니다. 리퍼러는 \"어느 페이지를 통해 이곳에 접속했는지\"를 알려주는 정보입니다.</p>\n<ol>\n<li>A 뉴스 사이트 방문: 사용자가 A 뉴스 사이트를 방문합니다. 이 페이지에 있던 광고 회사(ad-company.com)는 \"ID가 abc123인 사용자가 A 뉴스 사이트에서 나를 호출했군\"이라는 정보를 기록하고, tracker_id=abc123 쿠키를 발행합니다.</li>\n<li>B 쇼핑몰 사이트 방문: 잠시 후 사용자가 B 쇼핑몰로 이동합니다. 여기에도 같은 광고 회사의 배너가 있습니다. 광고를 요청하면서, 브라우저는 이전에 저장했던 tracker_id=abc123 쿠키를 광고 회사 서버로 보냅니다.</li>\n<li>광고 서버의 추리: 광고 서버는 abc123 쿠키를 보고 \"아는 사람이군!\"이라고 인식합니다. 그리고 함께 들어온 리퍼러(Referer) 정보를 통해 \"이번엔 B 쇼핑몰에서 나를 호출했네\"라는 사실을 알게 됩니다.</li>\n</ol>\n<p>결국 광고 회사는 쿠키로 '누구'인지 식별하고, 리퍼러로 '어디에' 있는지 파악하여 사용자의 온라인 행적을 파노라마처럼 수집하게 됩니다. 이 심각한 프라이버시 침해 문제 때문에, 최근 구글 크롬을 비롯한 대부분의 브라우저가 이 서드파티 쿠키를 차단하는 방향으로 나아가고 있습니다.</p>\n<h2 id=\"이-길은-안전하지-않아요---secure-쿠키\" style=\"position:relative;\"><a href=\"#%EC%9D%B4-%EA%B8%B8%EC%9D%80-%EC%95%88%EC%A0%84%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EC%9A%94---secure-%EC%BF%A0%ED%82%A4\" aria-label=\"이 길은 안전하지 않아요   secure 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>\"이 길은 안전하지 않아요!\" - Secure 쿠키</h2>\n<p>쿠키에는 보안을 위해 강력한 옵션들을 추가할 수 있습니다. 그 첫 번째가 바로 Secure 입니다.</p>\n<p>HTTPS는 통신 내용을 암호화하여 중간에 가로채도 알아볼 수 없게 만드는 안전한 통로입니다. 반면 HTTP는 모든 내용이 그대로 노출되는 위험한 통로죠. Secure 옵션이 붙은 쿠키는 브라우저에게 이렇게 말합니다.</p>\n<p>\"나는 오직 안전한 HTTPS 길로만 다닐 거야! 위험한 HTTP 길로는 절대 가지 않겠어.\"</p>\n<p>만약 개발자의 실수로 사이트의 링크 하나가 'http://'로 연결되어 있더라도, 브라우저는 이 Secure 쿠키를 HTTP 요청에 포함시키지 않아 민감한 정보가 유출되는 것을 원천적으로 막아줍니다.</p>\n<h2 id=\"스크립트-내-정보에-손대지-마---httponly-쿠키\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%82%B4-%EC%A0%95%EB%B3%B4%EC%97%90-%EC%86%90%EB%8C%80%EC%A7%80-%EB%A7%88---httponly-%EC%BF%A0%ED%82%A4\" aria-label=\"스크립트 내 정보에 손대지 마   httponly 쿠키 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>\"스크립트, 내 정보에 손대지 마!\" - HttpOnly 쿠키</h2>\n<p>웹사이트 게시판에 심어진 악성 스크립트가 <code class=\"language-text\">document.cookie</code> 라는 명령어로 브라우저에 저장된 쿠키를 훔쳐 공격자의 서버로 전송하는 공격을 <strong>XSS(Cross-Site Scripting)</strong> 라고 합니다. 만약 로그인 세션 ID가 담긴 쿠키를 도둑맞는다면, 공격자는 내 계정으로 마음대로 로그인할 수 있게 되겠죠.</p>\n<p>HttpOnly 옵션은 이 공격을 막는 결정적인 방패입니다. 이 옵션이 붙은 쿠키는 브라우저에게 이렇게 명령합니다.</p>\n<p>\"나는 오직 서버와 통신할 때만 사용될 거야. 이 웹페이지의 어떤 JavaScript도 나를 읽거나 접근할 수 없어.\"</p>\n<p>브라우저는 이 명령을 충실히 이행하여, document.cookie가 실행되어도 HttpOnly 쿠키 정보는 쏙 빼고 보여줍니다. 악성 스크립트는 가장 중요한 정보를 훔치지 못하고 좌절하게 됩니다. 세션 ID처럼 민감한 정보에는 이제 선택이 아닌 필수로 여겨지는 옵션입니다.</p>\n<h2 id=\"맺으며\" style=\"position:relative;\"><a href=\"#%EB%A7%BA%EC%9C%BC%EB%A9%B0\" aria-label=\"맺으며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>맺으며</h2>\n<p>지금까지 클라이언트의 작은 기억상자, 쿠키에 대해 알아보았습니다. 쿠키는 단순히 정보를 저장하는 조각이 아니라, 언제 사라질지(유효기간), 누가 만들었는지(발행 주체), 그리고 어떤 보안 규칙을 따를지(Secure, HttpOnly)가 정해지는 매우 정교한 장치였습니다.</p>","timeToRead":4,"frontmatter":{"title":"클라이언트의 작은 기억상자, 쿠키","summary":null,"date":"2023-06-09","categories":["cookie"],"thumbnail":null}}}]}},"pageContext":{"slug":"/cookie/"}},"staticQueryHashes":[],"slicesMap":{}}