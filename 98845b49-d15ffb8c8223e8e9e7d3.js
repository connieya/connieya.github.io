"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[808],{5208:function(e,r,t){var a=t(7276),n=t(6540),s=t(3423),l=t(4848);let o=null;try{const{supabase:e}=t(3001);o=e,o||console.warn("Supabase client is null. Check your environment variables.")}catch(C){console.warn("Supabase not configured:",C)}const i=["ê·€ì—¬ìš´","ì—‰ëš±í•œ","ìœ ì¾Œí•œ","ì‹ ë¹„í•œ","ë°”ìœ","ëŠê¸‹í•œ","ë¹ ë¥¸","ìš©ê°í•œ","ì†”ì§í•œ","ê¸ì •ì ì¸","ë°˜ì§ì´ëŠ”","í™œë°œí•œ","ìž¥ë‚œìŠ¤ëŸ¬ìš´","í˜¸ê¸°ì‹¬ë§Žì€","ìˆ˜ì¤ì€","ê¹Œë¶€ëŠ”","ì² í•™ì ì¸","ë‚¯ê°€ë¦¬ëŠ”","ë©ë•Œë¦¬ëŠ”","ì§„ì§€í•œ","ë¯¸ë¬˜í•œ","í—ˆì„¸ë¡œìš´","ì•Œì­ë‹¬ì­í•œ","ê³ ë¯¼ë§Žì€","ì‚°ëœ»í•œ","ì–´ë‘ìš´","ëª…ëž‘í•œ"],d=["ì—¬í–‰ìž","ë°©ëž‘ìž","ëª½ìƒê°€","ì‹œì¸","ì¹œêµ¬","ì†ë‹˜","ê´€ì°°ìž","ë„ì „ìž","ìˆ˜ì§‘ê°€","ì‚°ì±…ìž","ê¿ˆê¾¸ëŠ”ì´","ì´ì•¼ê¸°ê¾¼","ë…ì„œê°€","íƒí—˜ê°€","ìš”ë¦¬ì‚¬","í™”ê°€","ì»¤í”¼ìž”","ì—°í•„","ì•ˆê²½","ë…¸íŠ¸ë¶","ìŠ¤í‘¼","ìš°ì‚°","ì´ì–´í°","ì¹´ë©”ë¼","ëª¨ìž","ì¿ í‚¤"],c=()=>`${i[Math.floor(Math.random()*i.length)]} ${d[Math.floor(Math.random()*d.length)]}`;r.A=()=>{const{0:e,1:r}=(0,n.useState)([]),{0:t,1:a}=(0,n.useState)(c()),{0:i,1:d}=(0,n.useState)(""),{0:C,1:L}=(0,n.useState)(!1),{0:M,1:D}=(0,n.useState)(!0),{0:O,1:B}=(0,n.useState)(null);if(!o)return(0,l.jsx)(m,{children:(0,l.jsxs)(y,{children:["ë°©ëª…ë¡ ê¸°ëŠ¥ì— ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"Supabaseê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ GATSBY_SUPABASE_URLê³¼ GATSBY_SUPABASE_ANON_KEYë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."]})});const F=async()=>{try{const{data:e,error:t}=await o.from("guestbook").select("*").order("created_at",{ascending:!1});t?(console.error("Error fetching guestbook entries:",t),B("ë°©ëª…ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")):(r(e||[]),B(null))}catch(a){var e,t;console.error("Error:",a),null!=a&&null!==(e=a.message)&&void 0!==e&&e.includes("Failed to fetch")||null!=a&&null!==(t=a.message)&&void 0!==t&&t.includes("ERR_NAME_NOT_RESOLVED")||"TypeError"===(null==a?void 0:a.name)?B("Supabase ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."):B("ë°©ëª…ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{D(!1)}};(0,n.useEffect)(()=>{F();let e=null;try{e=o.channel("guestbook_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"guestbook"},e=>{F()})}catch(r){console.warn("Failed to set up real-time subscription:",r)}return()=>{if(e)try{e.unsubscribe()}catch(r){console.warn("Failed to unsubscribe:",r)}}},[]);return(0,l.jsxs)(m,{children:[O&&(0,l.jsx)(y,{children:O}),(0,l.jsx)(g,{onSubmit:async e=>{if(e.preventDefault(),t.trim()&&i.trim()){L(!0),B(null);try{const{error:e}=await o.from("guestbook").insert([{name:t.trim(),message:i.trim()}]);e?(console.error("Error submitting guestbook entry:",e),B("ë°©ëª…ë¡ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")):(await F(),a(c()),d(""))}catch(s){var r,n;console.error("Error:",s),null!=s&&null!==(r=s.message)&&void 0!==r&&r.includes("Failed to fetch")||null!=s&&null!==(n=s.message)&&void 0!==n&&n.includes("ERR_NAME_NOT_RESOLVED")||"TypeError"===(null==s?void 0:s.name)?B("Supabase ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."):B("ë°©ëª…ë¡ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}L(!1)}else alert("ì´ë¦„ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ìž…ë ¥í•´ì£¼ì„¸ìš”.")},children:(0,l.jsxs)(u,{children:[(0,l.jsxs)(b,{children:[(0,l.jsx)(f,{name:"name",maxLength:20,placeholder:"ì´ë¦„",value:t,onChange:e=>a(e.target.value),disabled:C}),(0,l.jsx)(h,{type:"button",onClick:()=>{a(c())},disabled:C,children:(0,l.jsx)(s.A,{size:14})})]}),(0,l.jsx)(x,{name:"message",maxLength:200,placeholder:"ë°©ëª…ë¡ì„ ë‚¨ê²¨ì£¼ì„¸ìš”...",value:i,onChange:e=>d(e.target.value),disabled:C,rows:3}),(0,l.jsx)(p,{type:"submit",disabled:C,children:C?"ë“±ë¡ ì¤‘...":"ë°©ëª…ë¡ ë‚¨ê¸°ê¸°"})]})}),(0,l.jsx)(w,{children:M?(0,l.jsx)(v,{children:(0,l.jsx)(A,{children:"ë°©ëª…ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}):(0,l.jsx)(k,{children:0===e.length?(0,l.jsxs)(j,{children:[(0,l.jsx)(S,{children:"ðŸ“"}),(0,l.jsxs)(E,{children:["ì•„ì§ ë°©ëª…ë¡ì´ ì—†ìŠµë‹ˆë‹¤.",(0,l.jsx)("br",{}),"ì²« ë²ˆì§¸ ë°©ëª…ë¡ì„ ë‚¨ê²¨ë³´ì„¸ìš”!"]})]}):e.map(e=>{let{id:r,name:t,message:a,created_at:n}=e;return(0,l.jsxs)(_,{children:[(0,l.jsxs)(z,{children:[(0,l.jsx)(R,{children:t}),(0,l.jsx)(N,{children:(s=n,new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),(0,l.jsx)(T,{children:a})]},r);var s})})})]})};const m=(0,a.A)("div",{target:"e8f3tl020"})({name:"1adci0h",styles:"width:100%;max-width:768px;margin:0 auto;padding:2rem 1rem;@media (max-width: 768px){padding:2rem 0.75rem;}"}),g=(0,a.A)("form",{target:"e8f3tl019"})({name:"nyfdx3",styles:"margin-bottom:3rem"}),u=(0,a.A)("div",{target:"e8f3tl018"})({name:"1gt3okx",styles:"background:white;border:1px solid #e5e7eb;border-radius:8px;padding:1rem;box-shadow:0 1px 3px rgba(0, 0, 0, 0.1);display:flex;flex-direction:column;gap:0.75rem;max-width:500px"}),b=(0,a.A)("div",{target:"e8f3tl017"})({name:"rp9f8l",styles:"display:flex;gap:0.75rem;align-items:flex-start"}),f=(0,a.A)("input",{target:"e8f3tl016"})({name:"qa37jy",styles:"flex:0 0 150px;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;font-size:0.8rem;background:#f9fafb;transition:all 0.2s ease;&:focus{outline:none;border-color:#6b7280;box-shadow:0 0 0 2px rgba(107, 114, 128, 0.1);background:white;}&:disabled{background:#f3f4f6;cursor:not-allowed;}"}),h=(0,a.A)("button",{target:"e8f3tl015"})({name:"4rfz2i",styles:"padding:0.5rem;background:#6b7280;color:white;border:none;border-radius:6px;font-size:0.8rem;cursor:pointer;transition:background-color 0.2s ease;min-width:40px;&:hover:not(:disabled){background:#4b5563;}&:disabled{background:#9ca3af;cursor:not-allowed;}"}),x=(0,a.A)("textarea",{target:"e8f3tl014"})({name:"hx3v7o",styles:"width:100%;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;font-size:0.8rem;background:#f9fafb;resize:none;min-height:60px;transition:all 0.2s ease;&:focus{outline:none;border-color:#6b7280;box-shadow:0 0 0 2px rgba(107, 114, 128, 0.1);background:white;}&:disabled{background:#f3f4f6;cursor:not-allowed;}"}),p=(0,a.A)("button",{target:"e8f3tl013"})({name:"7u9o41",styles:"align-self:flex-end;padding:0.5rem 1rem;background:#374151;color:white;border:none;border-radius:6px;font-size:0.8rem;font-weight:500;cursor:pointer;transition:background-color 0.2s ease;&:hover:not(:disabled){background:#1f2937;}&:disabled{background:#9ca3af;cursor:not-allowed;}"}),y=(0,a.A)("div",{target:"e8f3tl012"})({name:"1r3cf5s",styles:"background:#fef2f2;color:#dc2626;padding:1rem;border-radius:8px;margin-bottom:2rem;text-align:center;border:1px solid #fecaca"}),w=(0,a.A)("div",{target:"e8f3tl011"})({name:"hltamm",styles:"margin-top:2rem"}),v=(0,a.A)("div",{target:"e8f3tl010"})({name:"1y8lscg",styles:"text-align:center;padding:3rem 1rem"}),A=(0,a.A)("p",{target:"e8f3tl09"})({name:"fialwp",styles:"color:#6b7280;font-size:0.875rem;margin:0"}),k=(0,a.A)("ul",{target:"e8f3tl08"})({name:"uaz3xq",styles:"display:flex;flex-direction:column;gap:2rem;list-style:none;padding:0;margin:0"}),j=(0,a.A)("div",{target:"e8f3tl07"})({name:"1y8lscg",styles:"text-align:center;padding:3rem 1rem"}),S=(0,a.A)("div",{target:"e8f3tl06"})({name:"16y4wwa",styles:"font-size:3rem;margin-bottom:1rem"}),E=(0,a.A)("p",{target:"e8f3tl05"})({name:"1ejwnbl",styles:"color:#6b7280;font-size:0.875rem;line-height:1.5"}),_=(0,a.A)("li",{target:"e8f3tl04"})({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),z=(0,a.A)("div",{target:"e8f3tl03"})({name:"4ved3l",styles:"display:flex;align-items:center;gap:0.5rem"}),R=(0,a.A)("span",{target:"e8f3tl02"})({name:"nfvct5",styles:"font-size:0.875rem;font-weight:600;color:#374151"}),N=(0,a.A)("time",{target:"e8f3tl01"})({name:"17u928w",styles:"font-size:0.75rem;color:#6b7280"}),T=(0,a.A)("p",{target:"e8f3tl00"})({name:"1c8f75d",styles:"font-size:0.875rem;color:#4b5563;line-height:1.6;margin:0"})}}]);
//# sourceMappingURL=98845b49-d15ffb8c8223e8e9e7d3.js.map