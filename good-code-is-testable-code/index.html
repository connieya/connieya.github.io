<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.5"/><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="테스트 코드를 작성하다 깨달은 것들: 좋은 코드는 테스트하기 좋은 코드였다. "/><meta data-react-helmet="true" property="og:description"/><meta data-react-helmet="true" property="og:image" content=""/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="테스트 코드를 작성하다 깨달은 것들: 좋은 코드는 테스트하기 좋은 코드였다. "/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="테스트 코드를 작성하다 깨달은 것들: 좋은 코드는 테스트하기 좋은 코드였다. "/><meta data-react-helmet="true" name="twitter:description"/><meta data-react-helmet="true" name="twitter:image" content=""/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><meta data-react-helmet="true" name="google-site-verification" content="웹 마스터 도구가 제공하는 Meta 태그"/><meta data-react-helmet="true" name="naver-site-verification" content="웹 마스터 도구가 제공하는 Meta 태그"/><style data-href="/styles.9e907bc32054b7771552.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">테스트 코드를 작성하다 깨달은 것들: 좋은 코드는 테스트하기 좋은 코드였다. </title><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://connieya.github.io/good-code-is-testable-code/" data-baseprotocol="https:" data-basehost="connieya.github.io"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 11pfcjj">.css-11pfcjj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><div class="css-11pfcjj esjg9ma0"><style data-emotion="css 123clne">.css-123clne{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:7rem;}</style><div class="css-123clne e1o8p83g6"><style data-emotion="css j1kgmw">.css-j1kgmw{width:100%;max-width:768px;margin:0 auto;padding:0 1rem;}@media (max-width: 768px){.css-j1kgmw{padding:0 0.75rem;}}</style><div class="css-j1kgmw e1o8p83g5"><style data-emotion="css 15umcqw">.css-15umcqw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:2rem;}</style><div class="css-15umcqw e1o8p83g4"><style data-emotion="css 6ybclw">.css-6ybclw{-webkit-text-decoration:none;text-decoration:none;color:inherit;-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;}.css-6ybclw:hover{opacity:0.8;}</style><a class="css-6ybclw e1o8p83g3" href="/"><style data-emotion="css vqqu6f">.css-vqqu6f{font-size:1.3rem;font-weight:bold;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}</style><span class="css-vqqu6f e1o8p83g1">박건희</span></a><a class="css-6ybclw e1o8p83g2" href="/blog/"><style data-emotion="css 11g2wj9">.css-11g2wj9{font-size:1.1rem;font-weight:400;color:#666;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}</style><span class="css-11g2wj9 e1o8p83g0">개발</span></a></div></div></div><style data-emotion="css-global 4cqo99">*{padding:0;margin:0;box-sizing:border-box;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}html,body,#___gatsby{height:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 11k3q87">.css-11k3q87{position:relative;width:100%;max-width:768px;margin:0 auto;}</style><div class="css-11k3q87 e17f455w0"><style data-emotion="css jwelnu">.css-jwelnu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:2.5rem 1rem 2rem;max-width:768px;margin:0 auto;}@media (max-width: 768px){.css-jwelnu{padding:2rem 0.75rem 1.5rem;}}</style><div class="css-jwelnu ehbuenk4"><style data-emotion="css gjsprg">.css-gjsprg{word-break:keep-all;line-height:1.3;font-size:1.9rem;margin-bottom:1.3rem;}@media (max-width: 768px){.css-gjsprg{font-size:1.8rem;margin-bottom:0.8rem;}}</style><h1 class="css-gjsprg ehbuenk3">테스트 코드를 작성하다 깨달은 것들: 좋은 코드는 테스트하기 좋은 코드였다. </h1><style data-emotion="css 1r9pax5">.css-1r9pax5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;color:#757575;font-size:0.9rem;}@media (max-width: 768px){.css-1r9pax5{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}}</style><div class="css-1r9pax5 ehbuenk2"><style data-emotion="css 1bmnxg7">.css-1bmnxg7{white-space:nowrap;}</style><div class="css-1bmnxg7 ehbuenk1">2023-12-16<style data-emotion="css uaob3j">.css-uaob3j{margin-left:0.5rem;}</style><span class="css-uaob3j ehbuenk0">약 <!-- -->7<!-- -->분</span></div></div></div><style data-emotion="css pqebd0">.css-pqebd0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;margin:0 auto;padding:1.5rem 1rem;line-height:1.75;word-break:break-all;}@media (max-width: 768px){.css-pqebd0{padding:1.5rem 0.75rem;}}.css-pqebd0 h1,.css-pqebd0 h2,.css-pqebd0 h3{margin-bottom:1.5rem;font-weight:700;}.css-pqebd0 h1{padding-left:0.2rem;font-size:2rem;border-bottom:1px solid #e2e5e6;}.css-pqebd0 h2{font-size:1.75rem;border-bottom:1px solid #e2e5e6;}.css-pqebd0 h3{font-size:1.25rem;}.css-pqebd0 *+h1,.css-pqebd0 *+h2,.css-pqebd0 *+h3{margin-top:2rem;margin-bottom:0.5rem;}.css-pqebd0 hr+h1,.css-pqebd0 hr+h2,.css-pqebd0 hr+h3{margin-top:0;}.css-pqebd0 blockquote{margin:30px 0;padding:0 1rem;color:#757575;font-weight:800;border-left:2px solid #e2e5e6;}.css-pqebd0 ol,.css-pqebd0 ul{margin-top:0rem;margin-bottom:0rem;margin-left:1rem;padding:0.5rem 0;}.css-pqebd0 li{font-weight:300;}.css-pqebd0 hr{margin:100px 0;border:1px solid #000;}.css-pqebd0 a{color:#0E68C8;}.css-pqebd0 p{margin:0;padding:0.5rem 0;font-weight:300;}.css-pqebd0 img{margin:1rem 0;max-width:100%;height:auto;display:block;margin-left:auto;margin-right:auto;}.css-pqebd0 pre[class*='language-'],.css-pqebd0 code[class*='language-']{color:#d4d4d4;font-size:13px;font-family:Menlo,Monaco,Consolas,'Andale Mono','Ubuntu Mono','Courier New',monospace;direction:ltr;white-space:pre;text-align:left;text-shadow:none;word-break:normal;word-spacing:normal;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;border-radius:0.5rem;}.css-pqebd0 pre[class*='language-']::selection,.css-pqebd0 code[class*='language-']::selection,.css-pqebd0 pre[class*='language-'] *::selection,.css-pqebd0 code[class*='language-'] *::selection{text-shadow:none;background:#264f78;}@media print{.css-pqebd0 pre[class*='language-'],.css-pqebd0 code[class*='language-']{text-shadow:none;}}.css-pqebd0 pre[class*='language-']{padding:1rem;overflow:auto;background:#1e1e1e;}.css-pqebd0:not(pre)>code[class*='language-']{padding:0.1em 0.3em;background:#1e1e1e;border-radius:0;border-radius:0.3em;}.css-pqebd0 .namespace{opacity:0.7;}.css-pqebd0 .token.doctype .token.doctype-tag{color:#569cd6;}.css-pqebd0 .token.doctype .token.name{color:#9cdcfe;}.css-pqebd0 .token.comment,.css-pqebd0 .token.prolog{color:#6a9955;}.css-pqebd0 .token.punctuation,.css-pqebd0 .language-html .language-css .token.punctuation,.css-pqebd0 .language-html .language-javascript .token.punctuation{color:#d4d4d4;}.css-pqebd0 .token.property,.css-pqebd0 .token.tag,.css-pqebd0 .token.boolean,.css-pqebd0 .token.number,.css-pqebd0 .token.constant,.css-pqebd0 .token.symbol,.css-pqebd0 .token.inserted,.css-pqebd0 .token.unit{color:#b5cea8;}.css-pqebd0 .token.selector,.css-pqebd0 .token.attr-name,.css-pqebd0 .token.string,.css-pqebd0 .token.char,.css-pqebd0 .token.builtin,.css-pqebd0 .token.deleted{color:#ce9178;}.css-pqebd0 .language-css .token.string.url{-webkit-text-decoration:underline;text-decoration:underline;}.css-pqebd0 .token.operator,.css-pqebd0 .token.entity{color:#d4d4d4;}.css-pqebd0 .token.operator.arrow{color:#569cd6;}.css-pqebd0 .token.atrule{color:#ce9178;}.css-pqebd0 .token.atrule .token.rule{color:#c586c0;}.css-pqebd0 .token.atrule .token.url{color:#9cdcfe;}.css-pqebd0 .token.atrule .token.url .token.function{color:#dcdcaa;}.css-pqebd0 .token.atrule .token.url .token.punctuation{color:#d4d4d4;}.css-pqebd0 .token.keyword{color:#569cd6;}.css-pqebd0 .token.keyword.module,.css-pqebd0 .token.keyword.control-flow{color:#c586c0;}.css-pqebd0 .token.function,.css-pqebd0 .token.function .token.maybe-class-name{color:#dcdcaa;}.css-pqebd0 .token.regex{color:#d16969;}.css-pqebd0 .token.important{color:#569cd6;}.css-pqebd0 .token.italic{font-style:italic;}.css-pqebd0 .token.constant{color:#9cdcfe;}.css-pqebd0 .token.class-name,.css-pqebd0 .token.maybe-class-name{color:#4ec9b0;}.css-pqebd0 .token.console{color:#9cdcfe;}.css-pqebd0 .token.parameter{color:#9cdcfe;}.css-pqebd0 .token.interpolation{color:#9cdcfe;}.css-pqebd0 .token.punctuation.interpolation-punctuation{color:#569cd6;}.css-pqebd0 .token.boolean{color:#569cd6;}.css-pqebd0 .token.property,.css-pqebd0 .token.variable,.css-pqebd0 .token.imports .token.maybe-class-name,.css-pqebd0 .token.exports .token.maybe-class-name{color:#9cdcfe;}.css-pqebd0 .token.selector{color:#d7ba7d;}.css-pqebd0 .token.escape{color:#d7ba7d;}.css-pqebd0 .token.tag{color:#569cd6;}.css-pqebd0 .token.tag .token.punctuation{color:#808080;}.css-pqebd0 .token.cdata{color:#808080;}.css-pqebd0 .token.attr-name{color:#9cdcfe;}.css-pqebd0 .token.attr-value,.css-pqebd0 .token.attr-value .token.punctuation{color:#ce9178;}.css-pqebd0 .token.attr-value .token.punctuation.attr-equals{color:#d4d4d4;}.css-pqebd0 .token.entity{color:#569cd6;}.css-pqebd0 .token.namespace{color:#4ec9b0;}.css-pqebd0 pre[class*='language-javascript'],.css-pqebd0 code[class*='language-javascript'],.css-pqebd0 pre[class*='language-jsx'],.css-pqebd0 code[class*='language-jsx'],.css-pqebd0 pre[class*='language-typescript'],.css-pqebd0 code[class*='language-typescript'],.css-pqebd0 pre[class*='language-tsx'],.css-pqebd0 code[class*='language-tsx']{color:#9cdcfe;}.css-pqebd0 pre[class*='language-css'],.css-pqebd0 code[class*='language-css']{color:#ce9178;}.css-pqebd0 pre[class*='language-html'],.css-pqebd0 code[class*='language-html']{color:#d4d4d4;}.css-pqebd0 .language-regex .token.anchor{color:#dcdcaa;}.css-pqebd0 .language-html .token.punctuation{color:#808080;}.css-pqebd0 pre[class*='language-']>code[class*='language-']{position:relative;z-index:1;}.css-pqebd0 .line-highlight.line-highlight{z-index:0;background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;}.css-pqebd0 pre[class*='language-text'],.css-pqebd0 code[class*='language-text']{padding:0.25rem;color:#000000;background-color:#e2e5e6;}@media (max-width: 768px){.css-pqebd0 img{width:100%;}.css-pqebd0 pre[class*='language-']{width:100%;overflow-x:auto;}}</style><div class="css-pqebd0 e13plzdv0"><p>개발자라면 한 번쯤 TDD(Test-Driven Development)라는 단어를 들어봤을 겁니다. 마치 개발의 성배처럼 여겨지기도 하죠.</p>
<p>저도 처음 TDD를 접했을 때, 그 개념 자체는 너무나 매력적이었습니다.</p>
<h2 id="tdd-그리고-red-green-refactoring-사이클" style="position:relative;"><a href="#tdd-%EA%B7%B8%EB%A6%AC%EA%B3%A0-red-green-refactoring-%EC%82%AC%EC%9D%B4%ED%81%B4" aria-label="tdd 그리고 red green refactoring 사이클 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TDD, 그리고 Red-Green-Refactoring 사이클</h2>
<p>TDD는 말 그대로 테스트 주도 개발입니다. 코드를 작성하기 전에 테스트 코드를 먼저 작성하는 방식이죠</p>
<p>TDD는 아래와 같은 Red-Green-Refactoring 사이클을 반복하며 진행됩니다.</p>
<p><img src="/images/tdd.png" alt="TDD Red-Green-Refactoring"></p>
<p>이미지 출처 <a href="https://mbauza.medium.com/red-green-refactor-1a3fb160e649" target="_blank" rel="nofollow">https://mbauza.medium.com/red-green-refactor-1a3fb160e649</a></p>
<br/>
<br/>
<ol>
<li>Red (실패하는 테스트 작성): 구현할 기능에 대한 테스트 코드를 먼저 작성합니다. 당연히 아직 기능이 구현되지 않았으므로 이 테스트는 실패합니다.</li>
<li>Green (테스트 통과를 위한 최소한의 코드 작성): 실패한 테스트를 통과시키기 위한 최소한의 코드를 작성합니다. 이 단계에서는 오직 테스트 통과에만 집중하며, 코드를 아름답게 만드는 것은 중요하지 않습니다.</li>
<li>Refactoring (코드 개선): 테스트가 모두 통과하는 것을 확인한 후, 작성된 코드를 리팩토링하여 더 깔끔하고 효율적으로 만듭니다. 이때 중요한 것은 리팩토링 과정에서 테스트가 실패하지 않도록 하는 것입니다.</li>
</ol>
<br/>
<p>이 사이클을 반복하면서 개발자는 자연스럽게 견고하고 유지보수하기 쉬운 코드를 작성하게 된다고 합니다.</p>
<p>하지만 막상 실제 프로젝트에 적용하려고 하면 생각만큼 쉽지 않은 것이 TDD였습니다.</p>
<p>그래서 저는 TDD의 큰 그림보다는, 우선 테스트 코드를 작성하는 것부터 시작하기로 했습니다.</p>
<p>"일단 테스트를 해보자!"는 마음으로요.</p>
<h2 id="테스트-코드-그-시작부터-쉽지-않네" style="position:relative;"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EA%B7%B8-%EC%8B%9C%EC%9E%91%EB%B6%80%ED%84%B0-%EC%89%BD%EC%A7%80-%EC%95%8A%EB%84%A4" aria-label="테스트 코드 그 시작부터 쉽지 않네 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트 코드, 그 시작부터 쉽지 않네?</h2>
<p>테스트 코드 작성이 분명 코드의 안정성을 높여주고 미래의 버그를 방지해 줄 것이라 믿었습니다.</p>
<p>그래서 막 새로 추가한 주문 생성 로직에 대한 단위 테스트를 작성하기 시작했습니다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ProductRepository</span> productRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OrderRepository</span> orderRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PointService</span> pointService<span class="token punctuation">;</span>

    <span class="token comment">// 주문 전에 재고 차감</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createOrder</span><span class="token punctuation">(</span><span class="token class-name">OrderPostRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProductRequestForOrder</span><span class="token punctuation">></span></span> productRequest <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> productIdQuntitiyMap <span class="token operator">=</span> productRequest<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">ProductRequestForOrder</span><span class="token operator">::</span><span class="token function">getProductId</span><span class="token punctuation">,</span> <span class="token class-name">ProductRequestForOrder</span><span class="token operator">::</span><span class="token function">getQuantity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// product id 추출</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products <span class="token operator">=</span> productRepository<span class="token punctuation">.</span><span class="token function">findAllById</span><span class="token punctuation">(</span>productRequest<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">ProductRequestForOrder</span><span class="token operator">::</span><span class="token function">getProductId</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">// 재고 차감</span>
        <span class="token function">deductQuantity</span><span class="token punctuation">(</span>products<span class="token punctuation">,</span> stockMap<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 주문</span>
        <span class="token class-name">Order</span> order <span class="token operator">=</span> <span class="token class-name">Order</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> products<span class="token punctuation">)</span><span class="token punctuation">;</span>
        orderRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 결제</span>
        pointService<span class="token punctuation">.</span><span class="token function">processPayment</span><span class="token punctuation">(</span>savedOrder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">deductQuantity</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> productIdQuntitiyMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product <span class="token operator">:</span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Long</span> quantity <span class="token operator">=</span> productIdQuntitiyMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">isLessThanQuantity</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InsufficientStockException</span><span class="token punctuation">(</span><span class="token constant">INSUFFICIENT_STOCK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            product<span class="token punctuation">.</span><span class="token function">deductQuantity</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<br/>
<p>createOrder 메서드는 주문 생성의 전체적인 흐름을 담고 있습니다. 그런데 문제가 발생했습니다.</p>
<p>이 메서드 안에는 deductQuantity라는 재고 차감 로직을 담당하는 private 메서드가 포함되어 있었습니다.</p>
<p>이 deductQuantity 메서드만을 독립적으로 테스트하고 싶었는데, private 접근 제어자 때문에 외부에서 직접 호출할 수 없는 겁니다!</p>
<br/>
<h2 id="코드가-신호를-보내고-있다-리팩토링-해달라고" style="position:relative;"><a href="#%EC%BD%94%EB%93%9C%EA%B0%80-%EC%8B%A0%ED%98%B8%EB%A5%BC-%EB%B3%B4%EB%82%B4%EA%B3%A0-%EC%9E%88%EB%8B%A4-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%95%B4%EB%8B%AC%EB%9D%BC%EA%B3%A0" aria-label="코드가 신호를 보내고 있다 리팩토링 해달라고 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>코드가 신호를 보내고 있다: "리팩토링 해달라고!"</h2>
<p>테스트 코드를 작성하기 어렵다는 것은 단순히 테스트 작성 방법을 몰라서가 아닐 수도 있습니다.</p>
<p>오히려 테스트하기 어렵게 코드가 작성되어 있을 가능성이 높다는 신호일 수 있습니다. 마치 코드가 "나를 좀 더 테스트하기 좋게 바꿔줘!"라고 외치는 것처럼 말이죠.</p>
<p>deductQuantity 메서드는 주문 생성 로직 중 재고 차감이라는 독립적인 관심사를 가지고 있습니다.</p>
<p>이 부분을 OrderService에서 private 메서드로 가지고 있기보다는, 별도의 클래스로 분리하여 독립적인 책임을 갖게 하는 것이 더 좋을 것 같다는 생각이 들었습니다.</p>
<br/>
<h3 id="리팩토링의-첫걸음--관심사-분리" style="position:relative;"><a href="#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EC%9D%98-%EC%B2%AB%EA%B1%B8%EC%9D%8C--%EA%B4%80%EC%8B%AC%EC%82%AC-%EB%B6%84%EB%A6%AC" aria-label="리팩토링의 첫걸음  관심사 분리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>리팩토링의 첫걸음 : 관심사 분리</h3>
<p>deductQuantity 메서드는 주문 생성 로직 중 재고 차감이라는 독립적인 관심사를 가지고 있습니다.</p>
<p>이 부분을 OrderService에서 private 메서드로 가지고 있기보다는, 별도의 클래스로 분리하여 독립적인 책임을 갖게 하는 것이 더 좋을 것 같다는 생각이 들었습니다.</p>
<br/>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token comment">// StockManager 클래스 분리</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockManager</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deductQuantity</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> productIdQuantityMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product <span class="token operator">:</span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Long</span> quantity <span class="token operator">=</span> productIdQuantityMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">isLessThanQuantity</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InsufficientStockException</span><span class="token punctuation">(</span><span class="token constant">INSUFFICIENT_STOCK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            product<span class="token punctuation">.</span><span class="token function">deductQuantity</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// OrderService 수정</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ProductRepository</span> productRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OrderRepository</span> orderRepository<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PointService</span> pointService<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">StockManager</span> stockManager<span class="token punctuation">;</span> <span class="token comment">// StockManager 주입</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderService</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">,</span> <span class="token class-name">ProductRepository</span> productRepository<span class="token punctuation">,</span>
                        <span class="token class-name">OrderRepository</span> orderRepository<span class="token punctuation">,</span> <span class="token class-name">PointService</span> pointService<span class="token punctuation">,</span>
                        <span class="token class-name">StockManager</span> stockManager<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 생성자 주입</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userRepository <span class="token operator">=</span> userRepository<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>productRepository <span class="token operator">=</span> productRepository<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orderRepository <span class="token operator">=</span> orderRepository<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pointService <span class="token operator">=</span> pointService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stockManager <span class="token operator">=</span> stockManager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createOrder</span><span class="token punctuation">(</span><span class="token class-name">OrderPostRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ... (이전 코드와 동일)</span>

        <span class="token comment">// 재고 차감 (이제 private이 아닌 외부 객체의 메서드 호출)</span>
        stockManager<span class="token punctuation">.</span><span class="token function">deductQuantity</span><span class="token punctuation">(</span>products<span class="token punctuation">,</span> productIdQuntitiyMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ... (이전 코드와 동일)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div>
<br/>
<p>이제 StockManager의 deductQuantity 메서드는 public이므로 손쉽게 단위 테스트를 작성할 수 있게 되었습니다!</p>
<p>단순히 테스트 코드를 작성하려 했을 뿐인데, 자연스럽게 관심사 분리와 단일 책임 원칙(SRP)을 지키는 방향으로 코드가 개선되었습니다.</p>
<br/>
<h3 id="진정한-단위-테스트를-위한-여정-repository의-독립" style="position:relative;"><a href="#%EC%A7%84%EC%A0%95%ED%95%9C-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%97%AC%EC%A0%95-repository%EC%9D%98-%EB%8F%85%EB%A6%BD" aria-label="진정한 단위 테스트를 위한 여정 repository의 독립 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>진정한 단위 테스트를 위한 여정: Repository의 독립</h3>
<p>다음으로 저를 고민하게 만든 부분은 바로 Repository였습니다.</p>
<p>OrderService는 userRepository와 productRepository, orderRepository에 강하게 의존하고 있었죠.</p>
<p>주문 생성 로직을 테스트하려면 실제 DB에 상품을 등록하고 조회하는 과정이 필요했는데, 이는 스프링 부트 테스트(통합 테스트)로 진행해야만 했습니다.</p>
<p>하지만 실제 스프링 컨텍스트와 DB를 사용하는 테스트는 속도가 느리고, 테스트 환경 설정이 복잡하며, 외부 환경에 의존적이라는 단점이 있습니다.</p>
<p>저는 이를 단위 테스트로 전환하여 더 빠르고 독립적인 테스트를 만들고 싶었습니다.</p>
<p>이를 위해 ProductRepository에 대한 Fake 객체를 만들어 사용하려고 했습니다.</p>
<p>테스트 시에는 실제 DB에 접근하지 않고, 메모리 상에서 동작하는 Fake 객체를 주입하여 테스트의 속도와 독립성을 확보하는 것이 목표였죠.</p>
<br/>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FakeProductRepository</span> <span class="token keyword">implements</span> <span class="token class-name">ProductRepository</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicLong</span> autoGeneratedId<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicLong</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllById</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>product <span class="token operator">-></span> ids<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">-></span> item<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">saveAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> product<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Product</span> newProduct <span class="token operator">=</span> <span class="token class-name">Product</span>
                    <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>autoGeneratedId<span class="token punctuation">.</span><span class="token function">incrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">price</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">quantity</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getQuantity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>newProduct<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> newProduct<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">.</span><span class="token function">removeIf</span><span class="token punctuation">(</span>item <span class="token operator">-></span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> product<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> product<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// JPA Repository가 가진 모든 메서드를 Fake 객체에서 구현해야 하는 문제</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllByPessimisticLock</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> productIds<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllByPessimisticLock2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> productIds<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findByIdPessimisticLock</span><span class="token punctuation">(</span><span class="token class-name">Long</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<br/>
<p>문제는 기존의 ProductRepository 인터페이스가 JpaRepository를 상속받고 있었다는 점이었습니다.</p>
<p>JpaRepository는 매우 많은 메서드를 가지고 있고, 이 모든 메서드를 FakeProductRepository에서 구현해야만 했습니다.</p>
<p>당장 사용하지 않는 메서드들(findAllByPessimisticLock 등)까지도요. 이는 불필요한 작업이었고, ProductRepository가 JPA라는 구체적인 기술에 강하게 결합되어 있다는 명확한 신호였습니다.</p>
<p>이 또한 코드가 보내는 신호였습니다.</p>
<p>OrderService가 JpaRepository라는 구체적인 구현체에 너무 강하게 의존하고 있다는 것을요.</p>
<p>이는 의존성 역전 원칙(DIP)을 위반하는 상황이었습니다. DIP는 "고수준 모듈은 저수준 모듈에 의존해서는 안 되며, 둘 다 추상화에 의존해야 한다"는 원칙입니다.</p>
<p>즉, OrderService가 구체적인 JpaRepository가 아닌, 추상화된 Repository 인터페이스에 의존하도록 만들어야 했습니다.</p>
<br/>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token comment">// ProductRepository 인터페이스: OrderService에서 필요한 메서드만 정의</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductRepository</span> <span class="token punctuation">{</span>
    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllById</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Product</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">saveAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// PessimisticLock 관련 메서드나 기타 JPA 메서드는 이 인터페이스에 정의하지 않음</span>
<span class="token punctuation">}</span>

<span class="token comment">// 실제 JPA Repository 구현체: ProductRepository 인터페이스를 구현</span>
<span class="token annotation punctuation">@Repository</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductRepositoryImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ProductRepository</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ProductJpaRepository</span> productJpaRepository<span class="token punctuation">;</span> <span class="token comment">// 실제 JpaRepository 주입</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllById</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">findAllById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">saveAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">saveAll</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// JpaRepository의 다른 메서드들은 ProductRepositoryImpl 내부에서만 사용하고</span>
    <span class="token comment">// ProductRepository 인터페이스에는 노출하지 않음</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAllByPessimisticLock</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> productIds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">findAllByPessimisticLock</span><span class="token punctuation">(</span>productIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productJpaRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ... 등등</span>
<span class="token punctuation">}</span></code></pre></div>
<br/>
<p>이제 ProductRepository 인터페이스는 OrderService가 필요로 하는 최소한의 메서드만 정의하게 되었습니다.</p>
<p>실제 JPA의 복잡한 메서드들은 ProductRepositoryImpl 내부에서 처리하고, OrderService는 오직 ProductRepository 인터페이스를 통해 필요한 기능에만 접근합니다.</p>
<p>이로 인해 FakeProductRepository를 만들 때도, ProductRepository 인터페이스에 정의된 몇 개의 메서드만 구현하면 됩니다.</p>
<p>굳이 필요 없는 findAllByPessimisticLock 같은 메서드까지 구현할 필요가 없어지는 것이죠.</p>
<p>덕분에 OrderService의 단위 테스트는 외부 환경에 의존하지 않고 독립적으로 실행할 수 있게 되었고, 테스트 코드 작성도 훨씬 용이해졌습니다.</p>
<br/>
<h2 id="테스트-코드가-알려주는-신호들" style="position:relative;"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%95%8C%EB%A0%A4%EC%A3%BC%EB%8A%94-%EC%8B%A0%ED%98%B8%EB%93%A4" aria-label="테스트 코드가 알려주는 신호들 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트 코드가 알려주는 신호들</h2>
<p>처음에는 단순히 테스트 코드를 작성하려 했을 뿐인데, 그 과정에서 의미 있는 발견들을 할 수 있었습니다.</p>
<ul>
<li>
<p><strong>테스트하기 어려운 코드는 리팩토링이 필요한 코드일 가능성이 높다.</strong> private 메서드나 강결합된 의존성은 테스트를 방해하는 동시에 코드의 설계 문제를 드러냈습니다.</p>
</li>
<li>
<p><strong>관심사 분리를 통한 단일 책임 원칙(SRP) 적용.</strong> deductQuantity 로직을 별도의 StockManager 클래스로 분리함으로써 각 클래스가 하나의 책임만 가지도록 개선되었고, 이는 코드의 가독성과 유지보수성을 크게 향상시켰습니다.</p>
</li>
<li>
<p><strong>의존성 역전 원칙(DIP)의 중요성 체감.</strong> 구체적인 구현체가 아닌 추상화된 인터페이스에 의존하게 함으로써 코드의 유연성을 확보하고 테스트 용이성을 극대화할 수 있었습니다. 특히 JPA Repository와 같은 특정 기술에 대한 의존성을 끊어내어 단위 테스트의 독립성을 확보하는 데 큰 도움이 되었습니다.</p>
</li>
</ul>
<p>이 외에도 테스트 코드를 작성하면서 얻을 수 있는 장점은 많습니다.</p>
<h2 id="테스트-코드가-주는-실질적인-이점들" style="position:relative;"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%A3%BC%EB%8A%94-%EC%8B%A4%EC%A7%88%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%A0%90%EB%93%A4" aria-label="테스트 코드가 주는 실질적인 이점들 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트 코드가 주는 실질적인 이점들</h2>
<ul>
<li><strong>버그 감소 및 안정성 향상</strong>: 테스트 코드는 잠재적인 버그를 미리 발견하고, 코드 변경 시 기존 기능이 망가지지 않도록 안전망 역할을 합니다.</li>
<li><strong>문서화 효과</strong>: 테스트 코드는 해당 기능이 어떻게 동작해야 하는지에 대한 살아있는 문서 역할을 합니다.</li>
<li><strong>빠른 피드백</strong>: 변경된 코드가 올바르게 작동하는지 즉각적인 피드백을 받을 수 있습니다.</li>
<li><strong>자신감 있는 리팩토링</strong>: 테스트 코드가 있다면 코드 변경에 대한 두려움을 줄이고 자신감 있게 리팩토링을 할 수 있습니다.</li>
</ul>
<h2 id="맺으며" style="position:relative;"><a href="#%EB%A7%BA%EC%9C%BC%EB%A9%B0" aria-label="맺으며 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>맺으며</h2>
<p>테스트 코드는 단순히 버그를 잡는 도구가 아닙니다. 좋은 테스트 코드를 작성하려는 노력은 곧 좋은 코드를 작성하려는 노력과 직결됩니다.</p>
<p>만약 테스트 코드 작성이 어렵게 느껴진다면, 그 어려움이 코드가 보내는 리팩토링 신호일 수 있다는 점을 기억하고 코드를 개선하는 기회로 삼아보세요.</p>
<p>분명 더 나은 개발 경험과 높은 품질의 코드를 만날 수 있을 겁니다!</p></div><style data-emotion="css fmunkh">.css-fmunkh{position:absolute;top:0;left:768px;height:100%;padding-left:4rem;}@media (max-width: 1400px){.css-fmunkh{display:none;}}</style><aside class="css-fmunkh ek4ynda1"><style data-emotion="css 1s5ilwz">.css-1s5ilwz{position:-webkit-sticky;position:sticky;top:6rem;width:240px;overflow:hidden;font-size:0.8rem;}.css-1s5ilwz p{margin:0;}.css-1s5ilwz a{display:block;padding:0.5rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;border-radius:4px;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-1s5ilwz a:hover{background-color:#badcff;}.css-1s5ilwz ul:first-child{border-left:none;}.css-1s5ilwz ul{margin-left:0.5rem;padding:0 0.5rem;list-style:none;border-left:2px solid #e2e5e6;}</style><nav class="css-1s5ilwz ek4ynda0"><ul>
<li>
<p><a href="#tdd-%EA%B7%B8%EB%A6%AC%EA%B3%A0-red-green-refactoring-%EC%82%AC%EC%9D%B4%ED%81%B4">TDD, 그리고 Red-Green-Refactoring 사이클</a></p>
</li>
<li>
<p><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EA%B7%B8-%EC%8B%9C%EC%9E%91%EB%B6%80%ED%84%B0-%EC%89%BD%EC%A7%80-%EC%95%8A%EB%84%A4">테스트 코드, 그 시작부터 쉽지 않네?</a></p>
</li>
<li>
<p><a href="#%EC%BD%94%EB%93%9C%EA%B0%80-%EC%8B%A0%ED%98%B8%EB%A5%BC-%EB%B3%B4%EB%82%B4%EA%B3%A0-%EC%9E%88%EB%8B%A4-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%95%B4%EB%8B%AC%EB%9D%BC%EA%B3%A0">코드가 신호를 보내고 있다: "리팩토링 해달라고!"</a></p>
<ul>
<li><a href="#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EC%9D%98-%EC%B2%AB%EA%B1%B8%EC%9D%8C--%EA%B4%80%EC%8B%AC%EC%82%AC-%EB%B6%84%EB%A6%AC">리팩토링의 첫걸음 : 관심사 분리</a></li>
<li><a href="#%EC%A7%84%EC%A0%95%ED%95%9C-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%97%AC%EC%A0%95-repository%EC%9D%98-%EB%8F%85%EB%A6%BD">진정한 단위 테스트를 위한 여정: Repository의 독립</a></li>
</ul>
</li>
<li>
<p><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%95%8C%EB%A0%A4%EC%A3%BC%EB%8A%94-%EC%8B%A0%ED%98%B8%EB%93%A4">테스트 코드가 알려주는 신호들</a></p>
</li>
<li>
<p><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%A3%BC%EB%8A%94-%EC%8B%A4%EC%A7%88%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%A0%90%EB%93%A4">테스트 코드가 주는 실질적인 이점들</a></p>
</li>
<li>
<p><a href="#%EB%A7%BA%EC%9C%BC%EB%A9%B0">맺으며</a></p>
</li>
</ul></nav></aside></div><style data-emotion="css b3pts2">.css-b3pts2{display:grid;place-items:center;margin-top:40px;padding:25px 0;font-size:15px;color:#aaa;font-weight:bold;text-align:center;line-height:1.2;background-color:#f0f0f0;}@media (max-width: 768px){.css-b3pts2{font-size:13px;}}</style><div class="css-b3pts2 ehmnl591">© <!-- -->2026<!-- --> 박건희<style data-emotion="css 1tmvi1x">.css-1tmvi1x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:5px;font-size:25px;}.css-1tmvi1x>a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:inherit;}@media (max-width: 768px){.css-1tmvi1x{font-size:20px;}}</style><div class="css-1tmvi1x ehmnl590"><a href="https://github.com/connieya" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/good-code-is-testable-code/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-699227d8735b37e2e49b.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-8535dbf06a13c1090bd2.js\"],\"component---src-pages-blog-tsx\":[\"/component---src-pages-blog-tsx-56a803507cb0c3271c7a.js\"],\"component---src-pages-books-tsx\":[\"/component---src-pages-books-tsx-ca950bedd3b94c1af82c.js\"],\"component---src-pages-guestbook-tsx\":[\"/component---src-pages-guestbook-tsx-773ea587d20001bc9b3f.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-92fa7e823b69858fcbd5.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-066e8ae937e494dc3d21.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="1e34adb8181f52075c8d";</script><script src="/webpack-runtime-ef9e1a86f1a968e45e4f.js" async></script><script src="/framework-a02ced70e77b2a7c030d.js" async></script><script src="/app-699227d8735b37e2e49b.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>