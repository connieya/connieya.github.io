"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[808],{5208:function(e,t,r){var a=r(7276),n=r(6540),s=r(3423),o=r(4848);let l=null;try{const{supabase:e}=r(3001);l=e}catch(L){console.warn("Supabase not configured:",L)}const i=["귀여운","엉뚱한","유쾌한","신비한","바쁜","느긋한","빠른","용감한","솔직한","긍정적인","반짝이는","활발한","장난스러운","호기심많은","수줍은","까부는","철학적인","낯가리는","멍때리는","진지한","미묘한","허세로운","알쏭달쏭한","고민많은","산뜻한","어두운","명랑한"],d=["여행자","방랑자","몽상가","시인","친구","손님","관찰자","도전자","수집가","산책자","꿈꾸는이","이야기꾼","독서가","탐험가","요리사","화가","커피잔","연필","안경","노트북","스푼","우산","이어폰","카메라","모자","쿠키"],c=()=>`${i[Math.floor(Math.random()*i.length)]} ${d[Math.floor(Math.random()*d.length)]}`;t.A=()=>{const{0:e,1:t}=(0,n.useState)([]),{0:r,1:a}=(0,n.useState)(c()),{0:i,1:d}=(0,n.useState)(""),{0:L,1:q}=(0,n.useState)(!1),{0:R,1:$}=(0,n.useState)(!0),{0:I,1:K}=(0,n.useState)(null);if(!l)return(0,o.jsx)(g,{children:(0,o.jsxs)(y,{children:["방명록 기능에 문제가 생겼습니다.",(0,o.jsx)("br",{})]})});const N=async()=>{try{const{data:e,error:r}=await l.from("guestbook").select("*").order("created_at",{ascending:!1});r?(console.error("Error fetching guestbook entries:",r),K("방명록을 불러오는데 실패했습니다.")):(t(e||[]),K(null))}catch(e){console.error("Error:",e),K("방명록을 불러오는데 실패했습니다.")}finally{$(!1)}};(0,n.useEffect)(()=>{N();const e=l.channel("guestbook_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"guestbook"},e=>{N()});return()=>{e.unsubscribe()}},[]);return(0,o.jsxs)(g,{children:[I&&(0,o.jsx)(y,{children:I}),(0,o.jsx)(m,{onSubmit:async e=>{if(e.preventDefault(),r.trim()&&i.trim()){q(!0),K(null);try{const{error:e}=await l.from("guestbook").insert([{name:r.trim(),message:i.trim()}]);e?(console.error("Error submitting guestbook entry:",e),K("방명록 등록에 실패했습니다.")):(await N(),a(c()),d(""))}catch(t){console.error("Error:",t),K("방명록 등록에 실패했습니다.")}q(!1)}else alert("이름과 내용을 모두 입력해주세요.")},children:(0,o.jsxs)(f,{children:[(0,o.jsxs)(b,{children:[(0,o.jsx)(u,{name:"name",maxLength:20,placeholder:"이름",value:r,onChange:e=>a(e.target.value),disabled:L}),(0,o.jsx)(h,{type:"button",onClick:()=>{a(c())},disabled:L,children:(0,o.jsx)(s.A,{size:14})})]}),(0,o.jsx)(x,{name:"message",maxLength:200,placeholder:"방명록을 남겨주세요...",value:i,onChange:e=>d(e.target.value),disabled:L,rows:3}),(0,o.jsx)(p,{type:"submit",disabled:L,children:L?"등록 중...":"방명록 남기기"})]})}),(0,o.jsx)(w,{children:R?(0,o.jsx)(k,{children:(0,o.jsx)(j,{children:"방명록을 불러오는 중..."})}):(0,o.jsx)(A,{children:0===e.length?(0,o.jsxs)(v,{children:[(0,o.jsx)(z,{children:"📝"}),(0,o.jsxs)(S,{children:["아직 방명록이 없습니다.",(0,o.jsx)("br",{}),"첫 번째 방명록을 남겨보세요!"]})]}):e.map(e=>{let{id:t,name:r,message:a,created_at:n}=e;return(0,o.jsxs)(E,{children:[(0,o.jsxs)(_,{children:[(0,o.jsx)(C,{children:r}),(0,o.jsx)(M,{children:(s=n,new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),(0,o.jsx)(D,{children:a})]},t);var s})})})]})};const g=(0,a.A)("div",{target:"e8f3tl020"})({name:"1adci0h",styles:"width:100%;max-width:768px;margin:0 auto;padding:2rem 1rem;@media (max-width: 768px){padding:2rem 0.75rem;}"}),m=(0,a.A)("form",{target:"e8f3tl019"})({name:"nyfdx3",styles:"margin-bottom:3rem"}),f=(0,a.A)("div",{target:"e8f3tl018"})({name:"1gt3okx",styles:"background:white;border:1px solid #e5e7eb;border-radius:8px;padding:1rem;box-shadow:0 1px 3px rgba(0, 0, 0, 0.1);display:flex;flex-direction:column;gap:0.75rem;max-width:500px"}),b=(0,a.A)("div",{target:"e8f3tl017"})({name:"rp9f8l",styles:"display:flex;gap:0.75rem;align-items:flex-start"}),u=(0,a.A)("input",{target:"e8f3tl016"})({name:"qa37jy",styles:"flex:0 0 150px;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;font-size:0.8rem;background:#f9fafb;transition:all 0.2s ease;&:focus{outline:none;border-color:#6b7280;box-shadow:0 0 0 2px rgba(107, 114, 128, 0.1);background:white;}&:disabled{background:#f3f4f6;cursor:not-allowed;}"}),h=(0,a.A)("button",{target:"e8f3tl015"})({name:"4rfz2i",styles:"padding:0.5rem;background:#6b7280;color:white;border:none;border-radius:6px;font-size:0.8rem;cursor:pointer;transition:background-color 0.2s ease;min-width:40px;&:hover:not(:disabled){background:#4b5563;}&:disabled{background:#9ca3af;cursor:not-allowed;}"}),x=(0,a.A)("textarea",{target:"e8f3tl014"})({name:"hx3v7o",styles:"width:100%;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;font-size:0.8rem;background:#f9fafb;resize:none;min-height:60px;transition:all 0.2s ease;&:focus{outline:none;border-color:#6b7280;box-shadow:0 0 0 2px rgba(107, 114, 128, 0.1);background:white;}&:disabled{background:#f3f4f6;cursor:not-allowed;}"}),p=(0,a.A)("button",{target:"e8f3tl013"})({name:"7u9o41",styles:"align-self:flex-end;padding:0.5rem 1rem;background:#374151;color:white;border:none;border-radius:6px;font-size:0.8rem;font-weight:500;cursor:pointer;transition:background-color 0.2s ease;&:hover:not(:disabled){background:#1f2937;}&:disabled{background:#9ca3af;cursor:not-allowed;}"}),y=(0,a.A)("div",{target:"e8f3tl012"})({name:"1r3cf5s",styles:"background:#fef2f2;color:#dc2626;padding:1rem;border-radius:8px;margin-bottom:2rem;text-align:center;border:1px solid #fecaca"}),w=(0,a.A)("div",{target:"e8f3tl011"})({name:"hltamm",styles:"margin-top:2rem"}),k=(0,a.A)("div",{target:"e8f3tl010"})({name:"1y8lscg",styles:"text-align:center;padding:3rem 1rem"}),j=(0,a.A)("p",{target:"e8f3tl09"})({name:"fialwp",styles:"color:#6b7280;font-size:0.875rem;margin:0"}),A=(0,a.A)("ul",{target:"e8f3tl08"})({name:"uaz3xq",styles:"display:flex;flex-direction:column;gap:2rem;list-style:none;padding:0;margin:0"}),v=(0,a.A)("div",{target:"e8f3tl07"})({name:"1y8lscg",styles:"text-align:center;padding:3rem 1rem"}),z=(0,a.A)("div",{target:"e8f3tl06"})({name:"16y4wwa",styles:"font-size:3rem;margin-bottom:1rem"}),S=(0,a.A)("p",{target:"e8f3tl05"})({name:"1ejwnbl",styles:"color:#6b7280;font-size:0.875rem;line-height:1.5"}),E=(0,a.A)("li",{target:"e8f3tl04"})({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),_=(0,a.A)("div",{target:"e8f3tl03"})({name:"4ved3l",styles:"display:flex;align-items:center;gap:0.5rem"}),C=(0,a.A)("span",{target:"e8f3tl02"})({name:"nfvct5",styles:"font-size:0.875rem;font-weight:600;color:#374151"}),M=(0,a.A)("time",{target:"e8f3tl01"})({name:"17u928w",styles:"font-size:0.75rem;color:#6b7280"}),D=(0,a.A)("p",{target:"e8f3tl00"})({name:"1c8f75d",styles:"font-size:0.875rem;color:#4b5563;line-height:1.6;margin:0"})}}]);
//# sourceMappingURL=98845b49-9026cdd274124810b530.js.map